<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Redis - 五大数据类型及API | Haoyuan&#39;s blog</title>
    <meta name="generator" content="VuePress 1.9.9">
    <link rel="shortcut icon" href="/img/favicon.ico">
    <link rel="stylesheet" href="//at.alicdn.com/t/font_3114978_qe0b39no76.css">
    <noscript><meta http-equiv="refresh" content="0; url=/noscript.html"><style>.theme-vdoing-content { display:none }</style></noscript>
    <script src="https://cdn.jsdelivr.net/npm/twikoo@1.6.41/dist/twikoo.all.min.js"></script>
    <script>var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?720c7013e4bdca4370c380ffa206fbd7";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();</script>
    <meta name="description" content="Somnus Haoyuan个人博客, VuePress搭建, 使用了 Vdoing 主题, 学习Java, AI大模型等相关知识, 记录生活和技术路程, 同时分享编程技巧。">
    <meta name="referrer" content="no-referrer-when-downgrade">
    <meta name="keywords" content="Web个人学习博客，学习是一件快乐的事情。">
    <meta name="theme-color" content="#11a8cd">
    
    <link rel="preload" href="/assets/css/0.styles.6aa5acdd.css" as="style"><link rel="preload" href="/assets/js/app.0a0131c5.js" as="script"><link rel="preload" href="/assets/js/2.84f16386.js" as="script"><link rel="preload" href="/assets/js/165.5ca92248.js" as="script"><link rel="preload" href="/assets/js/15.107d5767.js" as="script"><link rel="preload" href="/assets/js/5.1ffba6c1.js" as="script"><link rel="preload" href="/assets/js/9.dba8a9bf.js" as="script"><link rel="preload" href="/assets/js/12.f955b8f4.js" as="script"><link rel="prefetch" href="/assets/js/10.2faf032d.js"><link rel="prefetch" href="/assets/js/100.20bf2323.js"><link rel="prefetch" href="/assets/js/101.9c9c8de9.js"><link rel="prefetch" href="/assets/js/102.934f4e2d.js"><link rel="prefetch" href="/assets/js/103.eead12c9.js"><link rel="prefetch" href="/assets/js/104.f11cb866.js"><link rel="prefetch" href="/assets/js/105.f031400c.js"><link rel="prefetch" href="/assets/js/106.8c306f6f.js"><link rel="prefetch" href="/assets/js/107.df8bced1.js"><link rel="prefetch" href="/assets/js/108.8a4b8ff1.js"><link rel="prefetch" href="/assets/js/109.8468626d.js"><link rel="prefetch" href="/assets/js/11.8d4c884c.js"><link rel="prefetch" href="/assets/js/110.169f17cd.js"><link rel="prefetch" href="/assets/js/111.f3bffe9c.js"><link rel="prefetch" href="/assets/js/112.66c40603.js"><link rel="prefetch" href="/assets/js/113.c09c4f4e.js"><link rel="prefetch" href="/assets/js/114.70c200f9.js"><link rel="prefetch" href="/assets/js/115.10d6bcd7.js"><link rel="prefetch" href="/assets/js/116.85ae7f39.js"><link rel="prefetch" href="/assets/js/117.d4e80f1d.js"><link rel="prefetch" href="/assets/js/118.a4d5e916.js"><link rel="prefetch" href="/assets/js/119.fef47816.js"><link rel="prefetch" href="/assets/js/120.372cb96d.js"><link rel="prefetch" href="/assets/js/121.2560116c.js"><link rel="prefetch" href="/assets/js/122.6437fe12.js"><link rel="prefetch" href="/assets/js/123.f2705525.js"><link rel="prefetch" href="/assets/js/124.d52d8b46.js"><link rel="prefetch" href="/assets/js/125.409b7367.js"><link rel="prefetch" href="/assets/js/126.ffcb0c58.js"><link rel="prefetch" href="/assets/js/127.c463ff09.js"><link rel="prefetch" href="/assets/js/128.faf13335.js"><link rel="prefetch" href="/assets/js/129.fefb2424.js"><link rel="prefetch" href="/assets/js/13.06f0d806.js"><link rel="prefetch" href="/assets/js/130.bb7d196c.js"><link rel="prefetch" href="/assets/js/131.c9d6f3b0.js"><link rel="prefetch" href="/assets/js/132.099f706f.js"><link rel="prefetch" href="/assets/js/133.c1d4cb67.js"><link rel="prefetch" href="/assets/js/134.83670718.js"><link rel="prefetch" href="/assets/js/135.476146e2.js"><link rel="prefetch" href="/assets/js/136.1593b8d9.js"><link rel="prefetch" href="/assets/js/137.9bc3b9a4.js"><link rel="prefetch" href="/assets/js/138.d2521be7.js"><link rel="prefetch" href="/assets/js/139.62b35ac9.js"><link rel="prefetch" href="/assets/js/14.e8a14911.js"><link rel="prefetch" href="/assets/js/140.66e953ab.js"><link rel="prefetch" href="/assets/js/141.f5764cbb.js"><link rel="prefetch" href="/assets/js/142.0e746c49.js"><link rel="prefetch" href="/assets/js/143.6f1daa06.js"><link rel="prefetch" href="/assets/js/144.253c5b86.js"><link rel="prefetch" href="/assets/js/145.9efc9743.js"><link rel="prefetch" href="/assets/js/146.5ca8591e.js"><link rel="prefetch" href="/assets/js/147.090249ce.js"><link rel="prefetch" href="/assets/js/148.eb0d6771.js"><link rel="prefetch" href="/assets/js/149.e49921fe.js"><link rel="prefetch" href="/assets/js/150.d8dd30e6.js"><link rel="prefetch" href="/assets/js/151.ae139f9c.js"><link rel="prefetch" href="/assets/js/152.6fe2e61f.js"><link rel="prefetch" href="/assets/js/153.68586d37.js"><link rel="prefetch" href="/assets/js/154.143abe60.js"><link rel="prefetch" href="/assets/js/155.054668cb.js"><link rel="prefetch" href="/assets/js/156.64a37696.js"><link rel="prefetch" href="/assets/js/157.468fb051.js"><link rel="prefetch" href="/assets/js/158.cd86d09f.js"><link rel="prefetch" href="/assets/js/159.c8b30b9a.js"><link rel="prefetch" href="/assets/js/16.f07b2571.js"><link rel="prefetch" href="/assets/js/160.af17304a.js"><link rel="prefetch" href="/assets/js/161.bbc9ee08.js"><link rel="prefetch" href="/assets/js/162.41293d9d.js"><link rel="prefetch" href="/assets/js/163.537f97a2.js"><link rel="prefetch" href="/assets/js/164.d1c05dfa.js"><link rel="prefetch" href="/assets/js/166.646fb23c.js"><link rel="prefetch" href="/assets/js/167.e843f0a6.js"><link rel="prefetch" href="/assets/js/168.cf29dd2c.js"><link rel="prefetch" href="/assets/js/169.c184c85a.js"><link rel="prefetch" href="/assets/js/17.84a5438d.js"><link rel="prefetch" href="/assets/js/170.d2c04b4d.js"><link rel="prefetch" href="/assets/js/171.403f850c.js"><link rel="prefetch" href="/assets/js/172.90786932.js"><link rel="prefetch" href="/assets/js/173.efcde16a.js"><link rel="prefetch" href="/assets/js/174.21f55463.js"><link rel="prefetch" href="/assets/js/175.08a078ec.js"><link rel="prefetch" href="/assets/js/176.6e21166e.js"><link rel="prefetch" href="/assets/js/177.efb7d4d2.js"><link rel="prefetch" href="/assets/js/178.2500c230.js"><link rel="prefetch" href="/assets/js/179.9d6c29aa.js"><link rel="prefetch" href="/assets/js/18.bb0be2bd.js"><link rel="prefetch" href="/assets/js/180.f95be4a5.js"><link rel="prefetch" href="/assets/js/181.85b9a153.js"><link rel="prefetch" href="/assets/js/182.8d26647c.js"><link rel="prefetch" href="/assets/js/183.05486a17.js"><link rel="prefetch" href="/assets/js/184.ba18a36c.js"><link rel="prefetch" href="/assets/js/185.c81d03b9.js"><link rel="prefetch" href="/assets/js/186.b1329482.js"><link rel="prefetch" href="/assets/js/187.51582634.js"><link rel="prefetch" href="/assets/js/188.388bda32.js"><link rel="prefetch" href="/assets/js/189.c5dc9c9a.js"><link rel="prefetch" href="/assets/js/19.cf05dd2f.js"><link rel="prefetch" href="/assets/js/190.f6a931e8.js"><link rel="prefetch" href="/assets/js/191.d4fa3d3f.js"><link rel="prefetch" href="/assets/js/192.904f7b4f.js"><link rel="prefetch" href="/assets/js/193.b6a5c1e7.js"><link rel="prefetch" href="/assets/js/194.11881e6e.js"><link rel="prefetch" href="/assets/js/195.997cd66f.js"><link rel="prefetch" href="/assets/js/196.1cbe63db.js"><link rel="prefetch" href="/assets/js/197.93ca4c41.js"><link rel="prefetch" href="/assets/js/198.452abacb.js"><link rel="prefetch" href="/assets/js/199.6ef2d196.js"><link rel="prefetch" href="/assets/js/20.4c443620.js"><link rel="prefetch" href="/assets/js/200.1aa7c83b.js"><link rel="prefetch" href="/assets/js/201.19f892f2.js"><link rel="prefetch" href="/assets/js/202.1e66dad2.js"><link rel="prefetch" href="/assets/js/203.16eb0ea5.js"><link rel="prefetch" href="/assets/js/204.39579f84.js"><link rel="prefetch" href="/assets/js/205.52141eaf.js"><link rel="prefetch" href="/assets/js/206.136a23c8.js"><link rel="prefetch" href="/assets/js/207.ff657d3e.js"><link rel="prefetch" href="/assets/js/208.2356db48.js"><link rel="prefetch" href="/assets/js/209.697dd2f6.js"><link rel="prefetch" href="/assets/js/21.8098fc81.js"><link rel="prefetch" href="/assets/js/210.dbf73975.js"><link rel="prefetch" href="/assets/js/211.579d567a.js"><link rel="prefetch" href="/assets/js/212.b23d9c7a.js"><link rel="prefetch" href="/assets/js/213.4c75fb4a.js"><link rel="prefetch" href="/assets/js/214.7abd2b60.js"><link rel="prefetch" href="/assets/js/215.c3b1f9f7.js"><link rel="prefetch" href="/assets/js/216.fe793ca1.js"><link rel="prefetch" href="/assets/js/217.d15bd553.js"><link rel="prefetch" href="/assets/js/218.5bcd5fb4.js"><link rel="prefetch" href="/assets/js/219.8c2a1ea4.js"><link rel="prefetch" href="/assets/js/22.70655ba9.js"><link rel="prefetch" href="/assets/js/220.8bfcebce.js"><link rel="prefetch" href="/assets/js/221.93318fb0.js"><link rel="prefetch" href="/assets/js/222.475a522b.js"><link rel="prefetch" href="/assets/js/223.cb628b00.js"><link rel="prefetch" href="/assets/js/224.d22879e7.js"><link rel="prefetch" href="/assets/js/225.d2bacd2b.js"><link rel="prefetch" href="/assets/js/226.a25b1bd9.js"><link rel="prefetch" href="/assets/js/227.98bba663.js"><link rel="prefetch" href="/assets/js/228.9fe5796a.js"><link rel="prefetch" href="/assets/js/229.5e18e2c8.js"><link rel="prefetch" href="/assets/js/23.7d12a6ad.js"><link rel="prefetch" href="/assets/js/230.33d1ae2f.js"><link rel="prefetch" href="/assets/js/231.b93e5606.js"><link rel="prefetch" href="/assets/js/232.e71d875f.js"><link rel="prefetch" href="/assets/js/233.bf7617b1.js"><link rel="prefetch" href="/assets/js/234.393292da.js"><link rel="prefetch" href="/assets/js/235.f0410328.js"><link rel="prefetch" href="/assets/js/236.b5f9e198.js"><link rel="prefetch" href="/assets/js/237.ec7ba798.js"><link rel="prefetch" href="/assets/js/238.6a39c062.js"><link rel="prefetch" href="/assets/js/239.2c2a4471.js"><link rel="prefetch" href="/assets/js/24.b7aedf87.js"><link rel="prefetch" href="/assets/js/240.fe2d286e.js"><link rel="prefetch" href="/assets/js/241.9518dd8b.js"><link rel="prefetch" href="/assets/js/242.49fee092.js"><link rel="prefetch" href="/assets/js/243.99b57f78.js"><link rel="prefetch" href="/assets/js/244.faecedc4.js"><link rel="prefetch" href="/assets/js/245.4c7d5a61.js"><link rel="prefetch" href="/assets/js/246.c0787129.js"><link rel="prefetch" href="/assets/js/247.03b13721.js"><link rel="prefetch" href="/assets/js/248.0e1e7e10.js"><link rel="prefetch" href="/assets/js/249.cd1b3546.js"><link rel="prefetch" href="/assets/js/25.2b4258ee.js"><link rel="prefetch" href="/assets/js/250.204cda9d.js"><link rel="prefetch" href="/assets/js/251.2a3b46a2.js"><link rel="prefetch" href="/assets/js/252.e87cba9e.js"><link rel="prefetch" href="/assets/js/253.e3ed26de.js"><link rel="prefetch" href="/assets/js/254.f35b5188.js"><link rel="prefetch" href="/assets/js/255.555f461c.js"><link rel="prefetch" href="/assets/js/256.1924d5b2.js"><link rel="prefetch" href="/assets/js/257.1f63e62c.js"><link rel="prefetch" href="/assets/js/258.350b00da.js"><link rel="prefetch" href="/assets/js/259.855bf637.js"><link rel="prefetch" href="/assets/js/26.ea3c00b3.js"><link rel="prefetch" href="/assets/js/260.52a2e93a.js"><link rel="prefetch" href="/assets/js/261.1b448a46.js"><link rel="prefetch" href="/assets/js/262.ff4335e2.js"><link rel="prefetch" href="/assets/js/263.cfff3997.js"><link rel="prefetch" href="/assets/js/264.8bf179e4.js"><link rel="prefetch" href="/assets/js/265.e0e3befd.js"><link rel="prefetch" href="/assets/js/266.c26dc749.js"><link rel="prefetch" href="/assets/js/267.7f134a88.js"><link rel="prefetch" href="/assets/js/268.1bf1b124.js"><link rel="prefetch" href="/assets/js/269.d698565e.js"><link rel="prefetch" href="/assets/js/27.cbc4cccc.js"><link rel="prefetch" href="/assets/js/270.4f42ac21.js"><link rel="prefetch" href="/assets/js/271.05a737be.js"><link rel="prefetch" href="/assets/js/272.c934d176.js"><link rel="prefetch" href="/assets/js/273.3aad232d.js"><link rel="prefetch" href="/assets/js/274.e5b2bae0.js"><link rel="prefetch" href="/assets/js/275.bcd6f2b0.js"><link rel="prefetch" href="/assets/js/276.cbfb92ea.js"><link rel="prefetch" href="/assets/js/277.529f5c15.js"><link rel="prefetch" href="/assets/js/278.d99f2dd8.js"><link rel="prefetch" href="/assets/js/279.bf458453.js"><link rel="prefetch" href="/assets/js/28.08b743c1.js"><link rel="prefetch" href="/assets/js/280.3aee41b4.js"><link rel="prefetch" href="/assets/js/281.50efe138.js"><link rel="prefetch" href="/assets/js/282.139e2875.js"><link rel="prefetch" href="/assets/js/283.a99ab8f4.js"><link rel="prefetch" href="/assets/js/284.866f5184.js"><link rel="prefetch" href="/assets/js/285.549326bb.js"><link rel="prefetch" href="/assets/js/286.f0a2a050.js"><link rel="prefetch" href="/assets/js/287.787b390a.js"><link rel="prefetch" href="/assets/js/288.22f88ddb.js"><link rel="prefetch" href="/assets/js/289.28427db7.js"><link rel="prefetch" href="/assets/js/29.c5f9e602.js"><link rel="prefetch" href="/assets/js/290.3f12b330.js"><link rel="prefetch" href="/assets/js/291.7f57eaea.js"><link rel="prefetch" href="/assets/js/292.e5feeee3.js"><link rel="prefetch" href="/assets/js/293.a7576751.js"><link rel="prefetch" href="/assets/js/294.bccc1331.js"><link rel="prefetch" href="/assets/js/295.c458d115.js"><link rel="prefetch" href="/assets/js/296.932a078f.js"><link rel="prefetch" href="/assets/js/297.115e878c.js"><link rel="prefetch" href="/assets/js/298.704899ad.js"><link rel="prefetch" href="/assets/js/299.e5e8b486.js"><link rel="prefetch" href="/assets/js/3.91d9010e.js"><link rel="prefetch" href="/assets/js/30.1715c350.js"><link rel="prefetch" href="/assets/js/300.004b45df.js"><link rel="prefetch" href="/assets/js/301.4bf623cd.js"><link rel="prefetch" href="/assets/js/302.90b4b927.js"><link rel="prefetch" href="/assets/js/303.244027b3.js"><link rel="prefetch" href="/assets/js/304.9158ff43.js"><link rel="prefetch" href="/assets/js/305.5b90edf0.js"><link rel="prefetch" href="/assets/js/306.57920474.js"><link rel="prefetch" href="/assets/js/307.cff4cd7f.js"><link rel="prefetch" href="/assets/js/308.9a2f3ed5.js"><link rel="prefetch" href="/assets/js/309.dd223cb6.js"><link rel="prefetch" href="/assets/js/31.ad5520ae.js"><link rel="prefetch" href="/assets/js/310.b856a6cb.js"><link rel="prefetch" href="/assets/js/311.f37b977d.js"><link rel="prefetch" href="/assets/js/312.6a01dc0f.js"><link rel="prefetch" href="/assets/js/313.70d997db.js"><link rel="prefetch" href="/assets/js/314.1023c0c3.js"><link rel="prefetch" href="/assets/js/315.f3d6e906.js"><link rel="prefetch" href="/assets/js/316.6bd11ea2.js"><link rel="prefetch" href="/assets/js/317.3959f6ed.js"><link rel="prefetch" href="/assets/js/318.96d27d2f.js"><link rel="prefetch" href="/assets/js/319.a21676c5.js"><link rel="prefetch" href="/assets/js/32.2e7f0ecf.js"><link rel="prefetch" href="/assets/js/320.746ff1c4.js"><link rel="prefetch" href="/assets/js/321.a74e3556.js"><link rel="prefetch" href="/assets/js/322.52bbf1b0.js"><link rel="prefetch" href="/assets/js/323.e5e6e134.js"><link rel="prefetch" href="/assets/js/324.11467771.js"><link rel="prefetch" href="/assets/js/325.c5d2b08e.js"><link rel="prefetch" href="/assets/js/326.36ffe145.js"><link rel="prefetch" href="/assets/js/327.b594fde0.js"><link rel="prefetch" href="/assets/js/328.68ec528c.js"><link rel="prefetch" href="/assets/js/329.9e7346bf.js"><link rel="prefetch" href="/assets/js/33.0fb3ddd2.js"><link rel="prefetch" href="/assets/js/330.558b1753.js"><link rel="prefetch" href="/assets/js/331.ba0bce89.js"><link rel="prefetch" href="/assets/js/332.9106ec0a.js"><link rel="prefetch" href="/assets/js/333.86e1aaab.js"><link rel="prefetch" href="/assets/js/334.240b74e1.js"><link rel="prefetch" href="/assets/js/335.b6631f53.js"><link rel="prefetch" href="/assets/js/336.0569f061.js"><link rel="prefetch" href="/assets/js/337.16608416.js"><link rel="prefetch" href="/assets/js/338.48f3a56c.js"><link rel="prefetch" href="/assets/js/339.46d5c15e.js"><link rel="prefetch" href="/assets/js/34.bd64290b.js"><link rel="prefetch" href="/assets/js/340.bd501bea.js"><link rel="prefetch" href="/assets/js/341.1e4bac65.js"><link rel="prefetch" href="/assets/js/342.ae6ef815.js"><link rel="prefetch" href="/assets/js/343.02c7963b.js"><link rel="prefetch" href="/assets/js/344.d0f5c1c1.js"><link rel="prefetch" href="/assets/js/345.9a448b4f.js"><link rel="prefetch" href="/assets/js/346.6a3ac8be.js"><link rel="prefetch" href="/assets/js/347.2184fbfa.js"><link rel="prefetch" href="/assets/js/348.b48cfed6.js"><link rel="prefetch" href="/assets/js/349.99b549fc.js"><link rel="prefetch" href="/assets/js/35.9e75396b.js"><link rel="prefetch" href="/assets/js/350.a89da299.js"><link rel="prefetch" href="/assets/js/351.9da55b6a.js"><link rel="prefetch" href="/assets/js/352.f3798216.js"><link rel="prefetch" href="/assets/js/353.36dd9776.js"><link rel="prefetch" href="/assets/js/354.853a181d.js"><link rel="prefetch" href="/assets/js/355.39e06ee0.js"><link rel="prefetch" href="/assets/js/356.3b5e5404.js"><link rel="prefetch" href="/assets/js/357.fd6339e7.js"><link rel="prefetch" href="/assets/js/358.65fcd820.js"><link rel="prefetch" href="/assets/js/359.e0d87d16.js"><link rel="prefetch" href="/assets/js/36.2197e4c8.js"><link rel="prefetch" href="/assets/js/360.96eb1047.js"><link rel="prefetch" href="/assets/js/361.d5323bb4.js"><link rel="prefetch" href="/assets/js/362.86d99eaa.js"><link rel="prefetch" href="/assets/js/363.46a6e9df.js"><link rel="prefetch" href="/assets/js/364.c671ea8d.js"><link rel="prefetch" href="/assets/js/365.ab3f405d.js"><link rel="prefetch" href="/assets/js/366.fa7076c8.js"><link rel="prefetch" href="/assets/js/367.247046cc.js"><link rel="prefetch" href="/assets/js/368.c703ab59.js"><link rel="prefetch" href="/assets/js/369.f18d7572.js"><link rel="prefetch" href="/assets/js/37.0e9cfbbf.js"><link rel="prefetch" href="/assets/js/370.ab2ec655.js"><link rel="prefetch" href="/assets/js/371.d0da1e48.js"><link rel="prefetch" href="/assets/js/372.6e4d8981.js"><link rel="prefetch" href="/assets/js/373.da166f48.js"><link rel="prefetch" href="/assets/js/374.4f704087.js"><link rel="prefetch" href="/assets/js/375.b3d0749d.js"><link rel="prefetch" href="/assets/js/376.16e37777.js"><link rel="prefetch" href="/assets/js/377.affeb6a9.js"><link rel="prefetch" href="/assets/js/378.bc1c9292.js"><link rel="prefetch" href="/assets/js/379.026888db.js"><link rel="prefetch" href="/assets/js/38.d845e6b5.js"><link rel="prefetch" href="/assets/js/380.cb3bedf9.js"><link rel="prefetch" href="/assets/js/381.854ec26a.js"><link rel="prefetch" href="/assets/js/382.dd62c794.js"><link rel="prefetch" href="/assets/js/383.01dc63bc.js"><link rel="prefetch" href="/assets/js/384.1ca297e5.js"><link rel="prefetch" href="/assets/js/385.6d6d5ae9.js"><link rel="prefetch" href="/assets/js/386.7de0ab17.js"><link rel="prefetch" href="/assets/js/387.39f59b7c.js"><link rel="prefetch" href="/assets/js/388.424fcf76.js"><link rel="prefetch" href="/assets/js/389.c0a26732.js"><link rel="prefetch" href="/assets/js/39.77876eda.js"><link rel="prefetch" href="/assets/js/390.a7c798e2.js"><link rel="prefetch" href="/assets/js/391.48062b7a.js"><link rel="prefetch" href="/assets/js/392.58ee200c.js"><link rel="prefetch" href="/assets/js/393.234e1194.js"><link rel="prefetch" href="/assets/js/394.81ca1eec.js"><link rel="prefetch" href="/assets/js/395.67fe35a7.js"><link rel="prefetch" href="/assets/js/396.1fc871e1.js"><link rel="prefetch" href="/assets/js/397.e6a515da.js"><link rel="prefetch" href="/assets/js/398.f9752d49.js"><link rel="prefetch" href="/assets/js/399.a5ed5dce.js"><link rel="prefetch" href="/assets/js/4.f1d08658.js"><link rel="prefetch" href="/assets/js/40.48f98782.js"><link rel="prefetch" href="/assets/js/400.da8d06aa.js"><link rel="prefetch" href="/assets/js/401.fae5dd9c.js"><link rel="prefetch" href="/assets/js/402.9e934a55.js"><link rel="prefetch" href="/assets/js/403.8e21e9ca.js"><link rel="prefetch" href="/assets/js/404.82e81932.js"><link rel="prefetch" href="/assets/js/405.bd011978.js"><link rel="prefetch" href="/assets/js/406.0cd11f64.js"><link rel="prefetch" href="/assets/js/407.a6ea49c0.js"><link rel="prefetch" href="/assets/js/408.b446b37d.js"><link rel="prefetch" href="/assets/js/409.e11a50e7.js"><link rel="prefetch" href="/assets/js/41.e88545ce.js"><link rel="prefetch" href="/assets/js/410.8e3f0f21.js"><link rel="prefetch" href="/assets/js/411.48808c8b.js"><link rel="prefetch" href="/assets/js/412.69bf0344.js"><link rel="prefetch" href="/assets/js/413.0ad6edf6.js"><link rel="prefetch" href="/assets/js/414.45e214c6.js"><link rel="prefetch" href="/assets/js/415.1db659f1.js"><link rel="prefetch" href="/assets/js/416.d2bb2acd.js"><link rel="prefetch" href="/assets/js/417.48712cf7.js"><link rel="prefetch" href="/assets/js/418.79350bf8.js"><link rel="prefetch" href="/assets/js/419.6142db6e.js"><link rel="prefetch" href="/assets/js/42.b16ab3ee.js"><link rel="prefetch" href="/assets/js/420.96e4dc4d.js"><link rel="prefetch" href="/assets/js/421.f2aa7333.js"><link rel="prefetch" href="/assets/js/422.a4f3f879.js"><link rel="prefetch" href="/assets/js/423.e6b07aca.js"><link rel="prefetch" href="/assets/js/424.68d8ed8e.js"><link rel="prefetch" href="/assets/js/425.c69625f7.js"><link rel="prefetch" href="/assets/js/426.f3bb3e55.js"><link rel="prefetch" href="/assets/js/427.6b952487.js"><link rel="prefetch" href="/assets/js/428.c8dd4f0c.js"><link rel="prefetch" href="/assets/js/429.970bcfd1.js"><link rel="prefetch" href="/assets/js/43.47b6deeb.js"><link rel="prefetch" href="/assets/js/430.aedd61fc.js"><link rel="prefetch" href="/assets/js/431.3cbbe034.js"><link rel="prefetch" href="/assets/js/432.9c40e1ea.js"><link rel="prefetch" href="/assets/js/433.2293b45e.js"><link rel="prefetch" href="/assets/js/434.b6cff804.js"><link rel="prefetch" href="/assets/js/435.c1b89d1c.js"><link rel="prefetch" href="/assets/js/436.e4eb3ba4.js"><link rel="prefetch" href="/assets/js/437.3feec66e.js"><link rel="prefetch" href="/assets/js/438.1b87f7a1.js"><link rel="prefetch" href="/assets/js/439.35b9e2c3.js"><link rel="prefetch" href="/assets/js/44.50a792b7.js"><link rel="prefetch" href="/assets/js/440.3920e2fc.js"><link rel="prefetch" href="/assets/js/441.496c3796.js"><link rel="prefetch" href="/assets/js/442.54fdadc2.js"><link rel="prefetch" href="/assets/js/443.e49bbc51.js"><link rel="prefetch" href="/assets/js/444.6f161e33.js"><link rel="prefetch" href="/assets/js/445.8dd4cba1.js"><link rel="prefetch" href="/assets/js/446.dc2f7fe1.js"><link rel="prefetch" href="/assets/js/447.28f8478f.js"><link rel="prefetch" href="/assets/js/448.5bd05e45.js"><link rel="prefetch" href="/assets/js/449.cd384bab.js"><link rel="prefetch" href="/assets/js/45.0f491292.js"><link rel="prefetch" href="/assets/js/450.1bd25d8e.js"><link rel="prefetch" href="/assets/js/451.0509ac4e.js"><link rel="prefetch" href="/assets/js/452.cf49c6e3.js"><link rel="prefetch" href="/assets/js/453.61e5fea5.js"><link rel="prefetch" href="/assets/js/454.1491e446.js"><link rel="prefetch" href="/assets/js/455.ef62931a.js"><link rel="prefetch" href="/assets/js/456.e6e85d26.js"><link rel="prefetch" href="/assets/js/457.d35cbb69.js"><link rel="prefetch" href="/assets/js/458.7f24755f.js"><link rel="prefetch" href="/assets/js/459.0d489468.js"><link rel="prefetch" href="/assets/js/46.8cad9b71.js"><link rel="prefetch" href="/assets/js/460.dcfb097f.js"><link rel="prefetch" href="/assets/js/461.64f1ccd5.js"><link rel="prefetch" href="/assets/js/462.7ee9471a.js"><link rel="prefetch" href="/assets/js/463.0ac7350c.js"><link rel="prefetch" href="/assets/js/464.45c469a9.js"><link rel="prefetch" href="/assets/js/465.c610feb7.js"><link rel="prefetch" href="/assets/js/466.50713dbb.js"><link rel="prefetch" href="/assets/js/467.ff75ea9a.js"><link rel="prefetch" href="/assets/js/468.424cba9e.js"><link rel="prefetch" href="/assets/js/469.0f8aa650.js"><link rel="prefetch" href="/assets/js/47.b613df2f.js"><link rel="prefetch" href="/assets/js/470.3c6348d5.js"><link rel="prefetch" href="/assets/js/48.85fa11fa.js"><link rel="prefetch" href="/assets/js/49.7a8d91db.js"><link rel="prefetch" href="/assets/js/50.f98e787a.js"><link rel="prefetch" href="/assets/js/51.fca7ece9.js"><link rel="prefetch" href="/assets/js/52.72da79fd.js"><link rel="prefetch" href="/assets/js/53.99fb4719.js"><link rel="prefetch" href="/assets/js/54.77c456cb.js"><link rel="prefetch" href="/assets/js/55.2ea7947c.js"><link rel="prefetch" href="/assets/js/56.93aa6440.js"><link rel="prefetch" href="/assets/js/57.e1c7aaa6.js"><link rel="prefetch" href="/assets/js/58.d038388e.js"><link rel="prefetch" href="/assets/js/59.76b2cd9e.js"><link rel="prefetch" href="/assets/js/6.fe5e508e.js"><link rel="prefetch" href="/assets/js/60.7c08171e.js"><link rel="prefetch" href="/assets/js/61.fe69b359.js"><link rel="prefetch" href="/assets/js/62.f4f768dc.js"><link rel="prefetch" href="/assets/js/63.75ce37b4.js"><link rel="prefetch" href="/assets/js/64.3b4f72ef.js"><link rel="prefetch" href="/assets/js/65.c22cfced.js"><link rel="prefetch" href="/assets/js/66.8403887b.js"><link rel="prefetch" href="/assets/js/67.a2a1488d.js"><link rel="prefetch" href="/assets/js/68.4d3ec60a.js"><link rel="prefetch" href="/assets/js/69.7098f622.js"><link rel="prefetch" href="/assets/js/7.a65affc1.js"><link rel="prefetch" href="/assets/js/70.d8392ab0.js"><link rel="prefetch" href="/assets/js/71.5c3894ec.js"><link rel="prefetch" href="/assets/js/72.0453ced1.js"><link rel="prefetch" href="/assets/js/73.1d5a21ff.js"><link rel="prefetch" href="/assets/js/74.2a35588a.js"><link rel="prefetch" href="/assets/js/75.e87f3c8b.js"><link rel="prefetch" href="/assets/js/76.16da36dd.js"><link rel="prefetch" href="/assets/js/77.eb50c224.js"><link rel="prefetch" href="/assets/js/78.68bef57f.js"><link rel="prefetch" href="/assets/js/79.7b92c1ff.js"><link rel="prefetch" href="/assets/js/8.08fdf9a5.js"><link rel="prefetch" href="/assets/js/80.273f2594.js"><link rel="prefetch" href="/assets/js/81.ff6cd53c.js"><link rel="prefetch" href="/assets/js/82.c9a652d2.js"><link rel="prefetch" href="/assets/js/83.3a00aef8.js"><link rel="prefetch" href="/assets/js/84.0c030198.js"><link rel="prefetch" href="/assets/js/85.00fc1248.js"><link rel="prefetch" href="/assets/js/86.7bd1bf53.js"><link rel="prefetch" href="/assets/js/87.4f7ab45a.js"><link rel="prefetch" href="/assets/js/88.f0f24b48.js"><link rel="prefetch" href="/assets/js/89.713d903c.js"><link rel="prefetch" href="/assets/js/90.9a5613ec.js"><link rel="prefetch" href="/assets/js/91.dd747ae3.js"><link rel="prefetch" href="/assets/js/92.241c4fa1.js"><link rel="prefetch" href="/assets/js/93.7ae56c51.js"><link rel="prefetch" href="/assets/js/94.4b1ef4b5.js"><link rel="prefetch" href="/assets/js/95.65bbe7b0.js"><link rel="prefetch" href="/assets/js/96.9ead0ec3.js"><link rel="prefetch" href="/assets/js/97.dac9e7b3.js"><link rel="prefetch" href="/assets/js/98.8ec6356c.js"><link rel="prefetch" href="/assets/js/99.9db6ba1a.js">
    <link rel="stylesheet" href="/assets/css/0.styles.6aa5acdd.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container sidebar-open have-rightmenu have-body-img"><header class="navbar blur"><div title="目录" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/img/index/book.png" alt="Haoyuan's blog" class="logo"> <span class="site-name can-hide">Haoyuan's blog</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><a href="/navigation/" class="nav-link">导航站</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Java" class="dropdown-title"><a href="/java/" class="link-title">Java</a> <span class="title" style="display:none;">Java</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>Java基础</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/java/se/" class="nav-link">Java基础</a></li><li class="dropdown-subitem"><a href="/java/collection/" class="nav-link">Java集合</a></li><li class="dropdown-subitem"><a href="/java/se/reflect/" class="nav-link">Java反射</a></li><li class="dropdown-subitem"><a href="/java/juc/" class="nav-link">JavaJUC</a></li><li class="dropdown-subitem"><a href="/java/jvm/" class="nav-link">JavaJVM</a></li></ul></li><li class="dropdown-item"><h4>Java容器</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/javaweb/concept/" class="nav-link">JavaWeb</a></li></ul></li><li class="dropdown-item"><h4>Java版本新特性</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/java/new-features/" class="nav-link">Java新特性</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="数据库" class="dropdown-title"><a href="/database/" class="link-title">数据库</a> <span class="title" style="display:none;">数据库</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>SQL 数据库</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/mysql/" class="nav-link">MySQL</a></li><li class="dropdown-subitem"><a href="/oracle/" class="nav-link">Oracle</a></li></ul></li><li class="dropdown-item"><h4>NoSQL 数据库</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/redis/" class="nav-link router-link-active">Redis</a></li><li class="dropdown-subitem"><a href="/es/" class="nav-link">ElasticSearch</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="框架" class="dropdown-title"><a href="/frames/" class="link-title">框架</a> <span class="title" style="display:none;">框架</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>数据库</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/mybatis/" class="nav-link">MyBatis</a></li><li class="dropdown-subitem"><a href="/mybatis-plus/" class="nav-link">MyBatis-Plus</a></li></ul></li><li class="dropdown-item"><h4>消息中间件</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/activemq/" class="nav-link">ActiveMQ</a></li><li class="dropdown-subitem"><a href="/rabbitmq/" class="nav-link">RabbitMQ</a></li><li class="dropdown-subitem"><a href="/rocketmq/" class="nav-link">RocketMQ</a></li><li class="dropdown-subitem"><a href="/kafka/" class="nav-link">Kafka</a></li></ul></li><li class="dropdown-item"><h4>进阶服务</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/nginx/" class="nav-link">Nginx</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Spring生态" class="dropdown-title"><a href="/spring-ecology/" class="link-title">Spring生态</a> <span class="title" style="display:none;">Spring生态</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/spring/" class="nav-link">Spring</a></li><li class="dropdown-item"><!----> <a href="/spring-boot/" class="nav-link">Spring Boot</a></li><li class="dropdown-item"><!----> <a href="/spring-security/" class="nav-link">Spring Security</a></li><li class="dropdown-item"><!----> <a href="/spring-cloud/" class="nav-link">Spring Cloud</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="开发" class="dropdown-title"><a href="/dev-guide/" class="link-title">开发</a> <span class="title" style="display:none;">开发</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/design-pattern/" class="nav-link">设计模式</a></li><li class="dropdown-item"><!----> <a href="/algorithm/" class="nav-link">算法</a></li><li class="dropdown-item"><!----> <a href="/knowledge/" class="nav-link">知识</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="工具" class="dropdown-title"><a href="/tool/" class="link-title">工具</a> <span class="title" style="display:none;">工具</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>管理</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/maven/" class="nav-link">Maven</a></li><li class="dropdown-subitem"><a href="/git/" class="nav-link">Git</a></li></ul></li><li class="dropdown-item"><h4>部署</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/linux/" class="nav-link">Linux</a></li><li class="dropdown-subitem"><a href="/docker/" class="nav-link">Docker</a></li><li class="dropdown-subitem"><a href="/jenkins/" class="nav-link">Jenkins</a></li><li class="dropdown-subitem"><a href="/kubernetes/" class="nav-link">Kubernetes</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><a href="/front/" class="link-title">前端</a> <span class="title" style="display:none;">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>进阶</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/typescript/" class="nav-link">TypeScript</a></li></ul></li><li class="dropdown-item"><h4>框架</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/react/" class="nav-link">React</a></li><li class="dropdown-subitem"><a href="/vue2/" class="nav-link">Vue2</a></li><li class="dropdown-subitem"><a href="/vue3/" class="nav-link">Vue3</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="更多" class="dropdown-title"><!----> <span class="title" style="display:;">更多</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/whells-use/" class="nav-link">轮子工具</a></li><li class="dropdown-item"><!----> <a href="/projects/" class="nav-link">项目工程</a></li><li class="dropdown-item"><!----> <a href="/friends/" class="nav-link">友情链接</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="索引" class="dropdown-title"><a href="/archives/" class="link-title">索引</a> <span class="title" style="display:none;">索引</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>本站</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/categories/" class="nav-link">分类</a></li><li class="dropdown-subitem"><a href="/tags/" class="nav-link">标签</a></li><li class="dropdown-subitem"><a href="/archives/" class="nav-link">归档</a></li></ul></li><li class="dropdown-item"><h4>我的</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/whell/web/" class="nav-link">收藏</a></li><li class="dropdown-subitem"><a href="/about/mdskill/" class="nav-link">关于</a></li></ul></li></ul></div></div><div class="nav-item"><a href="/message-area/" class="nav-link">留言区</a></div> <a href="https://github.com/Somnus711/Somnus711.github.io" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar-hover-trigger"></div> <aside class="sidebar" style="display:none;"><div class="blogger"><img src="https://cdn.jsdelivr.net/gh/Somnus711/picx-image-hosting@master/blog-pic/avatar.2b7e13idyy9s.webp"> <div class="blogger-info"><h3>Somnus Haoyuan</h3> <span>Word is cheap, show me the code.</span></div></div> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><a href="/navigation/" class="nav-link">导航站</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Java" class="dropdown-title"><a href="/java/" class="link-title">Java</a> <span class="title" style="display:none;">Java</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>Java基础</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/java/se/" class="nav-link">Java基础</a></li><li class="dropdown-subitem"><a href="/java/collection/" class="nav-link">Java集合</a></li><li class="dropdown-subitem"><a href="/java/se/reflect/" class="nav-link">Java反射</a></li><li class="dropdown-subitem"><a href="/java/juc/" class="nav-link">JavaJUC</a></li><li class="dropdown-subitem"><a href="/java/jvm/" class="nav-link">JavaJVM</a></li></ul></li><li class="dropdown-item"><h4>Java容器</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/javaweb/concept/" class="nav-link">JavaWeb</a></li></ul></li><li class="dropdown-item"><h4>Java版本新特性</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/java/new-features/" class="nav-link">Java新特性</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="数据库" class="dropdown-title"><a href="/database/" class="link-title">数据库</a> <span class="title" style="display:none;">数据库</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>SQL 数据库</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/mysql/" class="nav-link">MySQL</a></li><li class="dropdown-subitem"><a href="/oracle/" class="nav-link">Oracle</a></li></ul></li><li class="dropdown-item"><h4>NoSQL 数据库</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/redis/" class="nav-link router-link-active">Redis</a></li><li class="dropdown-subitem"><a href="/es/" class="nav-link">ElasticSearch</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="框架" class="dropdown-title"><a href="/frames/" class="link-title">框架</a> <span class="title" style="display:none;">框架</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>数据库</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/mybatis/" class="nav-link">MyBatis</a></li><li class="dropdown-subitem"><a href="/mybatis-plus/" class="nav-link">MyBatis-Plus</a></li></ul></li><li class="dropdown-item"><h4>消息中间件</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/activemq/" class="nav-link">ActiveMQ</a></li><li class="dropdown-subitem"><a href="/rabbitmq/" class="nav-link">RabbitMQ</a></li><li class="dropdown-subitem"><a href="/rocketmq/" class="nav-link">RocketMQ</a></li><li class="dropdown-subitem"><a href="/kafka/" class="nav-link">Kafka</a></li></ul></li><li class="dropdown-item"><h4>进阶服务</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/nginx/" class="nav-link">Nginx</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Spring生态" class="dropdown-title"><a href="/spring-ecology/" class="link-title">Spring生态</a> <span class="title" style="display:none;">Spring生态</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/spring/" class="nav-link">Spring</a></li><li class="dropdown-item"><!----> <a href="/spring-boot/" class="nav-link">Spring Boot</a></li><li class="dropdown-item"><!----> <a href="/spring-security/" class="nav-link">Spring Security</a></li><li class="dropdown-item"><!----> <a href="/spring-cloud/" class="nav-link">Spring Cloud</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="开发" class="dropdown-title"><a href="/dev-guide/" class="link-title">开发</a> <span class="title" style="display:none;">开发</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/design-pattern/" class="nav-link">设计模式</a></li><li class="dropdown-item"><!----> <a href="/algorithm/" class="nav-link">算法</a></li><li class="dropdown-item"><!----> <a href="/knowledge/" class="nav-link">知识</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="工具" class="dropdown-title"><a href="/tool/" class="link-title">工具</a> <span class="title" style="display:none;">工具</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>管理</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/maven/" class="nav-link">Maven</a></li><li class="dropdown-subitem"><a href="/git/" class="nav-link">Git</a></li></ul></li><li class="dropdown-item"><h4>部署</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/linux/" class="nav-link">Linux</a></li><li class="dropdown-subitem"><a href="/docker/" class="nav-link">Docker</a></li><li class="dropdown-subitem"><a href="/jenkins/" class="nav-link">Jenkins</a></li><li class="dropdown-subitem"><a href="/kubernetes/" class="nav-link">Kubernetes</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><a href="/front/" class="link-title">前端</a> <span class="title" style="display:none;">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>进阶</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/typescript/" class="nav-link">TypeScript</a></li></ul></li><li class="dropdown-item"><h4>框架</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/react/" class="nav-link">React</a></li><li class="dropdown-subitem"><a href="/vue2/" class="nav-link">Vue2</a></li><li class="dropdown-subitem"><a href="/vue3/" class="nav-link">Vue3</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="更多" class="dropdown-title"><!----> <span class="title" style="display:;">更多</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/whells-use/" class="nav-link">轮子工具</a></li><li class="dropdown-item"><!----> <a href="/projects/" class="nav-link">项目工程</a></li><li class="dropdown-item"><!----> <a href="/friends/" class="nav-link">友情链接</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="索引" class="dropdown-title"><a href="/archives/" class="link-title">索引</a> <span class="title" style="display:none;">索引</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>本站</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/categories/" class="nav-link">分类</a></li><li class="dropdown-subitem"><a href="/tags/" class="nav-link">标签</a></li><li class="dropdown-subitem"><a href="/archives/" class="nav-link">归档</a></li></ul></li><li class="dropdown-item"><h4>我的</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/whell/web/" class="nav-link">收藏</a></li><li class="dropdown-subitem"><a href="/about/mdskill/" class="nav-link">关于</a></li></ul></li></ul></div></div><div class="nav-item"><a href="/message-area/" class="nav-link">留言区</a></div> <a href="https://github.com/Somnus711/Somnus711.github.io" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>关系数据库 - MySQL</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>关系数据库 - Oracle</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>缓存数据库 - Redis</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/redis/introduce/" class="sidebar-link">Redis - 介绍</a></li><li><a href="/redis/install/" class="sidebar-link">Redis - 安装</a></li><li><a href="/redis/data-types/" aria-current="page" class="active sidebar-link">Redis - 五大数据类型及API</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level2"><a href="/redis/data-types/#五大数据类型" class="sidebar-link">五大数据类型</a></li><li class="sidebar-sub-header level2"><a href="/redis/data-types/#键-key-命令" class="sidebar-link">键(key)命令</a></li><li class="sidebar-sub-header level2"><a href="/redis/data-types/#字符串string" class="sidebar-link">字符串String</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/redis/data-types/#单键单值" class="sidebar-link">单键单值</a></li><li class="sidebar-sub-header level3"><a href="/redis/data-types/#自增自减" class="sidebar-link">自增自减</a></li><li class="sidebar-sub-header level3"><a href="/redis/data-types/#多键多值" class="sidebar-link">多键多值</a></li><li class="sidebar-sub-header level3"><a href="/redis/data-types/#range范围" class="sidebar-link">range范围</a></li><li class="sidebar-sub-header level3"><a href="/redis/data-types/#键值条件" class="sidebar-link">键值条件</a></li><li class="sidebar-sub-header level3"><a href="/redis/data-types/#存储对象" class="sidebar-link">存储对象</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/redis/data-types/#列表list" class="sidebar-link">列表List</a></li><li class="sidebar-sub-header level2"><a href="/redis/data-types/#集合set" class="sidebar-link">集合Set</a></li><li class="sidebar-sub-header level2"><a href="/redis/data-types/#哈希hash" class="sidebar-link">哈希Hash</a></li><li class="sidebar-sub-header level2"><a href="/redis/data-types/#有序集合zset" class="sidebar-link">有序集合Zset</a></li><li class="sidebar-sub-header level2"><a href="/redis/data-types/#指令总结" class="sidebar-link">指令总结</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/redis/data-types/#键-key-命令-2" class="sidebar-link">键(key)命令</a></li><li class="sidebar-sub-header level3"><a href="/redis/data-types/#字符串string-2" class="sidebar-link">字符串String</a></li><li class="sidebar-sub-header level3"><a href="/redis/data-types/#列表list-2" class="sidebar-link">列表List</a></li><li class="sidebar-sub-header level3"><a href="/redis/data-types/#集合set-2" class="sidebar-link">集合Set</a></li><li class="sidebar-sub-header level3"><a href="/redis/data-types/#哈希hash-2" class="sidebar-link">哈希Hash</a></li><li class="sidebar-sub-header level3"><a href="/redis/data-types/#有序集合zset-2" class="sidebar-link">有序集合Zset</a></li></ul></li></ul></li><li><a href="/redis/new-types/" class="sidebar-link">Redis - 新增三大数据类型</a></li><li><a href="/redis/configuration/" class="sidebar-link">Redis - 配置文件</a></li><li><a href="/redis/publish-subscribe/" class="sidebar-link">Redis - 发布和订阅</a></li><li><a href="/redis/java/" class="sidebar-link">Redis - Java整合</a></li><li><a href="/redis/affair/" class="sidebar-link">Redis - 事务与锁</a></li><li><a href="/redis/persistence/" class="sidebar-link">Redis - 两种持久化</a></li><li><a href="/redis/master-slave/" class="sidebar-link">Redis - 主从复制</a></li><li><a href="/redis/cluster/" class="sidebar-link">Redis - 集群搭建</a></li><li><a href="/redis/application/" class="sidebar-link">Redis - 应用问题</a></li><li><a href="/redis/distributed-lock/" class="sidebar-link">Redis - 分布式锁</a></li><li><a href="/redis/spring-data-redis/" class="sidebar-link">Redis - Spring Data Redis</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>搜索数据库 - ElasticSearch</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>分布式数据库 - MongoDB</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <div><main class="page"><div class="theme-vdoing-wrapper "><div class="articleInfo-wrap" data-v-06225672><div class="articleInfo" data-v-06225672><ul class="breadcrumbs" data-v-06225672><li data-v-06225672><a href="/" title="首页" class="iconfont icon-home router-link-active" data-v-06225672></a></li> <li data-v-06225672><a href="/categories/?category=%E6%95%B0%E6%8D%AE%E5%BA%93" title="分类" data-v-06225672>数据库</a></li><li data-v-06225672><a href="/categories/?category=%E7%BC%93%E5%AD%98%E6%95%B0%E6%8D%AE%E5%BA%93%20-%20Redis" title="分类" data-v-06225672>缓存数据库 - Redis</a></li></ul> <div class="info" data-v-06225672><div title="作者" class="author iconfont icon-touxiang" data-v-06225672><a href="https://www.denghaoyuan.com/" target="_blank" title="作者" class="beLink" data-v-06225672>Haoyuan</a></div> <div title="创建时间" class="date iconfont icon-riqi" data-v-06225672><a href="javascript:;" data-v-06225672>2021-12-25</a></div> <!----></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-title">目录</div> <div class="right-menu-content"></div></div></div> <h1><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABH1JREFUSA3tVl1oHFUUPmdmd2ltklqbpJDiNnXFmgbFktho7YMPNiJSSZM0+CAYSkUELVhM6YuwIPpgoOKDqOBDC0XE2CQoNtQXBUFTTcCi+Wlh1V2TQExsUzcltd3M9Tt3ZjZzZ2fT+OJTL8yeM+eee757fmeJbq//KQL8X3DUSFOcfr7cRsRtxNQMWueeVzOkaITIGqQHNg5y8+jNW9ldM7A6nTpAjuolUikAwq7CE3WcM2RRDz+XGVgN3FptU/aUSlvq9Pa3iZ1+sgAqJyyAFqkipd9dqiwHF3P65YycLWc/6sqGrvoEoIp6DOFaX5h6+dnfjkWprwqsPk0dUGq5vySwDImC10KxFHgGL1SWoc92O3eVht09qdXNH11I2SsTsJYqMWzihqGMi+A+Garf3BAuuLI5oGlULyNfyB/HYNujwktOfRrMr5t77NmevqaUopx0grnKAyvVpmwUDB4x6FPXuGvYLTDwWsejwgtgkYKPqRJg8SV6xaiZ3ZTppGneS4yfH5/66fZSDHv+QZci/+h5c5UHtpy67JUqGppM0sh0Nc1dW6/N1W5Yoqat8/TU/VnadmdeW2PLLSyh0cvxBs3KbqTmwYPpxN4do/mzE8nEpvX/UMu2Wbp74zUAK5q6WkHns7V0eWkdPbPzd3rxkTGybadYySumVzhcaJFbs5UrEkQ/+CK8gF5dnh/6ciIZ73gwQ927L1IitoxKLXYP3SjYdOrHHfTZhRRlFyrorafPk20B3HPD1y2G3qKZME5Jcf3t/HUC13/8tSd++vqFveMUTwAUxSUFI1QekR1+bIze3D9MF2aq6cPvG72CgnldWCFqyRw3lwH8ZMerjTD9ElRO7Gv44wNpC90aASqGfVlz/Rx17srQ57/UU26hkhQqUB7dBR71WmzQhHUnblGmVOEw0jhbV1n9OlXUDCIRGaNV5Jp43N516fN7JmnTHdfp7Hgy0luO4aMhtkLL8Bi3bUWYvzh5Mn1dTxrL6QmGuRhGL/TiTTxRoEdTszSaq9GR0NGA3KdkOz3hqSV3MIDhQ5IVX/Ivx3umBti2es2h4eZby7x8br1rkf7Mo90AqC8aQ3sJeNzqFRu+vSANAQe3PL7l0HGOAdwDCeZYvNKeoZp1Qfs6Aipndh86HmFRi0LAnEO47wsqM6cdfjh3jBPUzhZy7nvlUfFsamED1VQt6aISHVymXZ/B2aCtIG8AI8xfobj2d3en1wWVhOeHELKmLQ1s211s88comkv4UCwWyF787mJdYXtNfhKAXVqnKTq8QZvGAGGOfaTo5pGZ/PwbUCr5+DPr/1J92JNHr9aOl/F3iI5+O1nfybsGxoimvZ3ViWSluDITw3P37mypheDIPY0tw7+O/5ApbkYw+zpfaUVu32Pi98+defdUhEpZkRFq0aqyNh9FuL9hpYbEm6iwi0z2REd09ZmyENEbuhjDWzKvZXTqKYaBIr3tt5kuPtQBZFvEUwHt60vfCNu41XsksH9Ij1BMMz1Y0OOunHNShFIP5868g5zeXmuLwL9T4b6Q2+KejgAAAABJRU5ErkJggg==">Redis - 五大数据类型及API<!----></h1> <!----> <div class="theme-vdoing-content content__default"><div class="custom-block note"><p class="custom-block-title">笔记</p> <p>Redis 常用的五大数据类型，这也是开发常用的数据类型，下面我们来学习每一个数据类型和其他的 API 命令。</p> <div class="custom-block right"><p>2021-12-25 @Young Kbt</p></div></div> <p></p><div class="table-of-contents"><ul><li><a href="#五大数据类型">五大数据类型</a></li><li><a href="#键-key-命令">键(key)命令</a></li><li><a href="#字符串string">字符串String</a><ul><li><a href="#单键单值">单键单值</a></li><li><a href="#自增自减">自增自减</a></li><li><a href="#多键多值">多键多值</a></li><li><a href="#range范围">range范围</a></li><li><a href="#键值条件">键值条件</a></li><li><a href="#存储对象">存储对象</a></li></ul></li><li><a href="#列表list">列表List</a></li><li><a href="#集合set">集合Set</a></li><li><a href="#哈希hash">哈希Hash</a></li><li><a href="#有序集合zset">有序集合Zset</a></li><li><a href="#指令总结">指令总结</a><ul><li><a href="#键-key-命令">键(key)命令</a></li><li><a href="#字符串string">字符串String</a></li><li><a href="#列表list">列表List</a></li><li><a href="#集合set">集合Set</a></li><li><a href="#哈希hash">哈希Hash</a></li><li><a href="#有序集合zset">有序集合Zset</a></li></ul></li></ul></div><p></p> <h2 id="五大数据类型"><a href="#五大数据类型" class="header-anchor">#</a> 五大数据类型</h2> <ul><li><p>String （字符串类型）</p> <p>String 是 Redis 最基本的类型，你可以理解成 Memcached 一模一样的类型，一个 key 对应一个 value。</p> <p>String 类型是二进制安全的，意思是 Redis 的 String 可以包含任何数据，比如 jpg 图片或者序列化的对象。</p> <p>String 类型是 redis 最基本的数据类型，一个 Redis 中字符串 value 最多可以是 512M。</p></li> <li><p>Hash（哈希，类似 Java 里的 Map）</p> <p>Redis hash 是一个键值对集合。</p> <p>Redis hash 是一个 String 类型的 field 和 value 的映射表，hash 特别适合用于存储对象。</p> <p>类似 Java 里面的 Map</p></li> <li><p>List（列表）</p> <p>Redis 列表是简单的字符串列表，按照插入顺序排序，你可以添加一个元素到列表的头部（左边）或者尾部（右边）。它的底层实际是个链表。</p></li> <li><p>Set（集合）</p> <p>Redis 的 Set 是 String 类型的无序集合，它是通过 HashTable 实现的。</p></li> <li><p>Zset（sorted set：有序集合）</p> <p>Redis zset 和 set 一样，也是 String 类型元素的集合，且不允许重复的成员。</p> <p>不同的是每个元素都会关联一个 double 类型的分数。</p> <p>Redis 正是通过分数来为集合中的成员进行从小到大的排序，zset 的成员是唯一的，但是分数（Score）却可以重复。</p></li></ul> <p><strong>命令大小写都可以，如果你只想单纯看 API，不想看例子，请移到最下面的 <a href="#%E6%8C%87%E4%BB%A4%E6%80%BB%E7%BB%93">指令总结</a>。</strong></p> <h2 id="键-key-命令"><a href="#键-key-命令" class="header-anchor">#</a> 键(key)命令</h2> <p>查看当前数据库的 key 的数量</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>dbsize
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><code>keys *</code> 指令查看当前库所有 key</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> keys *
<span class="token punctuation">(</span>empty list or <span class="token builtin class-name">set</span><span class="token punctuation">)</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> <span class="token builtin class-name">set</span> name kele
OK
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> keys *
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;name&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p><code>exists key</code> 指令判断某个 key 是否存在</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> EXISTS name
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> EXISTS name1
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">0</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p><code>type key</code> 指令查看 key 的类型是哪个</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> <span class="token builtin class-name">set</span> name kele
OK
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> get name
<span class="token string">&quot;kele&quot;</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> <span class="token builtin class-name">type</span> name
string
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p><code>del key</code> 指令删除指定的 key</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> del name
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
<span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> keys *
<span class="token punctuation">(</span>empty array<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p><code>unlink key</code> 指令根据 value 选择非阻塞删除（先将 keys 从 keysapce 元数据中删除，真正的删除会在后续异步操作）</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>127.0.0.1:6379[1]&gt; unlink key name
(integer) 1
127.0.0.1:6379[1]&gt; keys *
(empty array)
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p><code>expire key time</code> 指令给指定的 key 设置过期时间（time 以秒为单位），当 key 过期时(生存时间为 0 )，它会被自动删除</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> <span class="token builtin class-name">set</span> name kele
OK
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> expire name <span class="token number">10</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p><code>ttl key</code> 指令查看 key 还有多少秒过期，-1 表示永不过期，-2 表示已过期</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> <span class="token builtin class-name">set</span> name kele
OK
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> expire name <span class="token number">10</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> ttl name
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">4</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> ttl name
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> ttl name
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token parameter variable">-2</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> keys *
<span class="token punctuation">(</span>empty list or <span class="token builtin class-name">set</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p><code>select num</code> 指令选择数据库，num 代表从 0-16，默认是 0</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token keyword">select</span> <span class="token number">7</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><code>flushdb</code> 指令清空当前库</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>flushdb
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><code>flushall</code> 指令清空所有库</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>flushall
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="字符串string"><a href="#字符串string" class="header-anchor">#</a> 字符串String</h2> <h3 id="单键单值"><a href="#单键单值" class="header-anchor">#</a> 单键单值</h3> <ul><li><p><code>set &lt;key&gt; &lt;value&gt;</code> 指令添加键值对：</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token builtin class-name">set</span> <span class="token operator">&lt;</span>key<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>value<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>注意，当 key 不存在，则将 key-value 存入数据库，如果存在，则覆盖原来 value</p> <p>示例：Redis 的分布式锁应用</p> <div class="language-SH line-numbers-mode"><pre class="language-sh"><code><span class="token builtin class-name">set</span> lock locked nx ex <span class="token number">10</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>key 为 lock 的值 locked 在 10 秒内无法重新赋值，只有 10 秒后过期了，才能给 lock 赋值</p></li> <li><p><code>get &lt;key&gt;</code> 查看对应键值：</p> <div class="language-SH line-numbers-mode"><pre class="language-sh"><code>get <span class="token operator">&lt;</span>key<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p><code>append &lt;key&gt; &lt;value&gt;</code> 追加到原值的末尾：</p> <div class="language-SH line-numbers-mode"><pre class="language-sh"><code>append <span class="token operator">&lt;</span>key<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>value<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p><code>strlen &lt;key&gt;</code> 获得值的长度：</p> <div class="language-SH line-numbers-mode"><pre class="language-sh"><code>strlen <span class="token operator">&lt;</span>key<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p><code>setnx &lt;key&gt; &lt;value&gt;</code> 指令只有 key 不存在时，才加入该 key 的值：</p> <div class="language-SH line-numbers-mode"><pre class="language-sh"><code>setnx <span class="token operator">&lt;</span>key<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>value<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li></ul> <p>案例：</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> <span class="token builtin class-name">set</span> key1 value1 <span class="token comment"># 设置值</span>
OK
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> get key1 <span class="token comment"># 获得key</span>
<span class="token string">&quot;value1&quot;</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> del key1 <span class="token comment"># 删除key</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> keys * <span class="token comment"># 查看全部的key</span>
<span class="token punctuation">(</span>empty list or <span class="token builtin class-name">set</span><span class="token punctuation">)</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> exists key1 <span class="token comment"># 确保 key1 不存在</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">0</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> append key1 <span class="token string">&quot;hello&quot;</span> <span class="token comment"># 对不存在的 key 进行 APPEND，等同于 SET key1 &quot;hello&quot;</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">5</span> <span class="token comment"># 字符长度</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> APPEND key1 <span class="token string">&quot;-2333&quot;</span> <span class="token comment"># 对已存在的字符串进行 APPEND</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">10</span> <span class="token comment"># 长度从 5 个字符增加到 10 个字符</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> get key1
<span class="token string">&quot;hello-2333&quot;</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> strlen key1 <span class="token comment"># # 获取字符串的长度</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">10</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><h3 id="自增自减"><a href="#自增自减" class="header-anchor">#</a> 自增自减</h3> <ul><li><p><code>incr &lt;key&gt;</code> 指令将 key 中储存的数字值增 1，只能对数字值操作，如果为空，新增值为 1：</p> <div class="language-SH line-numbers-mode"><pre class="language-sh"><code>incr <span class="token operator">&lt;</span>key<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p><code>decr &lt;key&gt;</code> 指令将 key 中储存的数字值减 1，只能对数字值操作，如果为空，新增值为 -1：</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>decr <span class="token operator">&lt;</span>key<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p><code>incrby / decrby &lt;步长&gt;</code> 指令将 key 中储存的数字值增减。自定义步长：</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>incrby / decrby <span class="token operator">&lt;</span>步长<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li></ul> <p>案例：</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> <span class="token builtin class-name">set</span> views <span class="token number">0</span> <span class="token comment"># 设置浏览量为 0</span>
OK
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> incr views <span class="token comment"># 浏览 + 1</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> incr views <span class="token comment"># 浏览 + 1</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">2</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> decr views <span class="token comment"># 浏览 - 1</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>

<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> incrby views <span class="token number">10</span> <span class="token comment"># +10</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">11</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> decrby views <span class="token number">10</span> <span class="token comment"># -10</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h3 id="多键多值"><a href="#多键多值" class="header-anchor">#</a> 多键多值</h3> <ul><li><p><code>mset &lt;key1&gt; &lt;value&gt; &lt;key2&gt; &lt;value2&gt; ......</code> 指令设置一个或者多个 key-value 键值对</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>mset <span class="token operator">&lt;</span>key<span class="token operator"><span class="token file-descriptor important">1</span>&gt;</span> <span class="token operator">&lt;</span>value<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>key<span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span> <span class="token operator">&lt;</span>value<span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span> <span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p><code>mget &lt;key1&gt; &lt;key2&gt; ......</code> 指令获取一个或者多个 key-value 键值对</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>mget <span class="token operator">&lt;</span>key<span class="token operator"><span class="token file-descriptor important">1</span>&gt;</span> <span class="token operator">&lt;</span>key<span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span> <span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p><code>msetnx &lt;key1&gt; &lt;value&gt; &lt;key2&gt; &lt;value2&gt; ......</code> 指令同时设置一个或多个 key-value 对，当且仅当所有给定 key 都不存在</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>msetnx <span class="token operator">&lt;</span>key<span class="token operator"><span class="token file-descriptor important">1</span>&gt;</span> <span class="token operator">&lt;</span>value<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>key<span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span> <span class="token operator">&lt;</span>value<span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span> <span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li></ul> <p>案例：</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> mset k10 v10 k11 v11 k12 v12
OK
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> keys *
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;k12&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;k11&quot;</span>
<span class="token number">3</span><span class="token punctuation">)</span> <span class="token string">&quot;k10&quot;</span>

<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> mget k10 k11 k12 k13
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;v10&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;v11&quot;</span>
<span class="token number">3</span><span class="token punctuation">)</span> <span class="token string">&quot;v12&quot;</span>
<span class="token number">4</span><span class="token punctuation">)</span> <span class="token punctuation">(</span>nil<span class="token punctuation">)</span>

<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> msetnx k10 v10 k15 v15 <span class="token comment"># 原子性操作</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">0</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> get key15
<span class="token punctuation">(</span>nil<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><h3 id="range范围"><a href="#range范围" class="header-anchor">#</a> range范围</h3> <ul><li><p><code>getrange &lt;key&gt; &lt;起始位置&gt; &lt;结束位置&gt;</code> 指令获得值的范围，类似 Java 中的 substring</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>getrange <span class="token operator">&lt;</span>key<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>起始位置<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>结束位置<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p><code>setrange &lt;key&gt; &lt;起始位置&gt; &lt;value&gt;</code> 指令用 value 覆写所储存的字符串值，从 &lt;起始位置&gt; 开始(索引从 0 开始)</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>setrange <span class="token operator">&lt;</span>key<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>起始位置<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>value<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li></ul> <p>案例：</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> <span class="token builtin class-name">set</span> key2 abcd123456 <span class="token comment"># 设置 key2 的值</span>
OK
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> getrange key2 <span class="token number">0</span> <span class="token parameter variable">-1</span> <span class="token comment"># 获得全部的值</span>
<span class="token string">&quot;abcd123456&quot;</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> getrange key2 <span class="token number">0</span> <span class="token number">2</span> <span class="token comment"># 截取部分字符串</span>
<span class="token string">&quot;abc&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><ul><li><p><code>setrange &lt;key&gt; &lt;位置&gt; &lt;newValue&gt;</code> 指令设置指定区间范围内的值</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>setrange <span class="token operator">&lt;</span>key<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>位置<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>newValue<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li></ul> <p>案例：</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> get key2
<span class="token string">&quot;abcd123456&quot;</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> setrange key2 <span class="token number">1</span> xx <span class="token comment"># 替换值</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">10</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> get key2
<span class="token string">&quot;axxd123456&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>从位置 1 开始，将值替换为 xx，因为 xx 长度为 2，所以替换到位置 3 就结束了。</p> <h3 id="键值条件"><a href="#键值条件" class="header-anchor">#</a> 键值条件</h3> <ul><li><p><code>setex &lt;key&gt; &lt;过期时间/秒&gt; &lt;value&gt;</code> 指令设置键值的同时，设置过期时间，单位秒</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>setex <span class="token operator">&lt;</span>key<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>过期时间/秒<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>value<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p><code>psetex &lt;key&gt; &lt;过期时间/毫秒&gt; &lt;value&gt;</code> 指令设置键值的同时，设置过期时间，单位毫秒</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>psetex <span class="token operator">&lt;</span>key<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>过期时间/毫秒<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>value<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li></ul> <p>案例：</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> setex key3 <span class="token number">60</span> expire <span class="token comment"># 设置过期时间</span>
OK
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> ttl key3 <span class="token comment"># 查看剩余的时间</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">55</span>

<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> setnx mykey <span class="token string">&quot;redis&quot;</span> <span class="token comment"># 如果不存在就设置，成功返回1</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> setnx mykey <span class="token string">&quot;mongodb&quot;</span> <span class="token comment"># 如果值存在则不覆盖值，返回0</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">0</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> get mykey
<span class="token string">&quot;redis&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><ul><li><p><code>getset &lt;key&gt; &lt;value&gt;</code> 指令以新换旧，设置了新值同时获得旧值</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>getset <span class="token operator">&lt;</span>key<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>value<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li></ul> <p>案例：</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> getset db mongodb <span class="token comment"># 没有旧值，返回 nil</span>
<span class="token punctuation">(</span>nil<span class="token punctuation">)</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> get db
<span class="token string">&quot;mongodb&quot;</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> getset db redis <span class="token comment"># 返回旧值 mongodb</span>
<span class="token string">&quot;mongodb&quot;</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> get db
<span class="token string">&quot;redis&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="存储对象"><a href="#存储对象" class="header-anchor">#</a> 存储对象</h3> <p>格式：</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token builtin class-name">set</span> user:1 value（json数据）
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>案例：</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> mset user:1:name zhangsan user:1:age <span class="token number">2</span>
OK
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> mget user:1:name user:1:age
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;zhangsan&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;2&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>案例：</p> <blockquote><p>java 中的 i++ 是否是原子操作？</p></blockquote> <p>不是。</p> <blockquote><p>当 i = 0 时，如果有两个线程分别对 i 进行 ++100 次，值是多少？</p></blockquote> <p>2-200。</p> <h2 id="列表list"><a href="#列表list" class="header-anchor">#</a> 列表List</h2> <p>List 的特点：单键多值。底层实际是个双向链表，对两端的操作性能很高，通过索引下标的操作中间的节点性能会较差。</p> <ul><li><p><code>lpush/rpush &lt;key&gt; &lt;value1&gt; &lt;value2&gt; &lt;value3&gt; ...</code> 指令从左边 / 右边插入一个或多个值，左右也就是首尾</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>lpush/rpush <span class="token operator">&lt;</span>key<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>value<span class="token operator"><span class="token file-descriptor important">1</span>&gt;</span> <span class="token operator">&lt;</span>value<span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span> <span class="token operator">&lt;</span>value<span class="token operator"><span class="token file-descriptor important">3</span>&gt;</span> <span class="token punctuation">..</span>.
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>例子：</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>lpush k1 v1 v2 v3
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p><code>lrange &lt;key&gt; &lt;start&gt; &lt;stop&gt;</code> 指令按照索引下标获得元素(从左到右，先进后出)</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>lrange <span class="token operator">&lt;</span>key<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>start<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>stop<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p><code>lrange &lt;key&gt; 0 -1</code> 指令如果 start 是 0，stop 是 -1，代表获取所有元素</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>lrange <span class="token operator">&lt;</span>key<span class="token operator">&gt;</span> <span class="token number">0</span> <span class="token parameter variable">-1</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li></ul> <p>案例：</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> lpush list <span class="token string">&quot;one&quot;</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> lpush list <span class="token string">&quot;two&quot;</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">2</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> rpush list <span class="token string">&quot;right&quot;</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">3</span>

<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> lrange list <span class="token number">0</span> <span class="token parameter variable">-1</span>
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;two&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;one&quot;</span>
<span class="token number">3</span><span class="token punctuation">)</span> <span class="token string">&quot;right&quot;</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> lrange list <span class="token number">0</span> <span class="token number">1</span>
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;two&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;one&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><ul><li><p><code>lindex &lt;key&gt; &lt;index&gt;</code> 指令按照索引下标获得元素(从左到右)（-1 代表最后一个，0 代表是第一个）</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>lindex <span class="token operator">&lt;</span>key<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>index<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>例子：</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> lindex list <span class="token number">1</span>
<span class="token punctuation">(</span>nil<span class="token punctuation">)</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> lindex list <span class="token number">0</span>
<span class="token string">&quot;one&quot;</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> lindex list <span class="token parameter variable">-1</span>
<span class="token string">&quot;one&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div></li> <li><p><code>lpop/rpop &lt;key&gt;</code> 指令从左边 / 右边吐出一个值。吐出后该值就不存在 key 中</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>lpop/rpop <span class="token operator">&lt;</span>key<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>例子：</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> lpop list
<span class="token string">&quot;two&quot;</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> rpop list
<span class="token string">&quot;right&quot;</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> lrange list <span class="token number">0</span> <span class="token parameter variable">-1</span>
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;one&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div></li> <li><p><code>rpoplpush &lt;key1&gt; &lt;key2&gt;</code> 指令列表右边吐出一个值，插到列表左边，其中 key1 是 rpop 的 key，key2 是 lpush 的 key</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>rpoplpush <span class="token operator">&lt;</span>key<span class="token operator"><span class="token file-descriptor important">1</span>&gt;</span> <span class="token operator">&lt;</span>key<span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>例子：</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> rpush mylist <span class="token string">&quot;hello&quot;</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> rpush mylist <span class="token string">&quot;foo&quot;</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">2</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> rpush mylist <span class="token string">&quot;bar&quot;</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">3</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> rpoplpush mylist myotherlist
<span class="token string">&quot;bar&quot;</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> lrange mylist <span class="token number">0</span> <span class="token parameter variable">-1</span>
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;hello&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;foo&quot;</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> lrange myotherlist <span class="token number">0</span> <span class="token parameter variable">-1</span>
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;bar&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div></li> <li><p><code>llen &lt;key&gt;</code> 指令获得列表长度</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>llen <span class="token operator">&lt;</span>key<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>例子：</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> flushdb
OK
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> lpush list <span class="token string">&quot;one&quot;</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> lpush list <span class="token string">&quot;two&quot;</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">2</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> lpush list <span class="token string">&quot;three&quot;</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">3</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> llen list <span class="token comment"># 返回列表的长度</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">3</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div></li> <li><p><code>linsert &lt;key&gt; before/after &lt;value&gt; &lt;newValue&gt;</code> 指令在元素某个值的前面 / 后面插入新值，如果 value 有多个，则插入最前面的那个</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>linsert <span class="token operator">&lt;</span>key<span class="token operator">&gt;</span> before/after <span class="token operator">&lt;</span>value<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>newValue<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>例子：</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> rpush mylist <span class="token string">&quot;Hello&quot;</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> rpush mylist <span class="token string">&quot;world&quot;</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">2</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> lrange mylist <span class="token number">0</span> <span class="token parameter variable">-1</span>
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;Hello&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;world&quot;</span>

<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> linsert mylist BEFORE <span class="token string">&quot;world&quot;</span> <span class="token string">&quot;There&quot;</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">3</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> lrange mylist <span class="token number">0</span> <span class="token parameter variable">-1</span>
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;Hello&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;There&quot;</span>
<span class="token number">3</span><span class="token punctuation">)</span> <span class="token string">&quot;world&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div></li> <li><p><code>lrem &lt;key&gt; &lt;n&gt; &lt;value&gt;</code> 指令从左边删除 n 个 value（从左到右），如果有多个一样的 lement，则删除列表最前面的</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>lrem <span class="token operator">&lt;</span>key<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>n<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>value<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>例子：</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> lrem list <span class="token number">1</span> <span class="token string">&quot;two&quot;</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> lrange list <span class="token number">0</span> <span class="token parameter variable">-1</span>
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;three&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;one&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></li> <li><p><code>lset &lt;key&gt; &lt;index&gt; &lt;value&gt;</code> 指令将列表 key 下标为 index 的值替换成 value</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>lset <span class="token operator">&lt;</span>key<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>index<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>value<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>例子：</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> exists list <span class="token comment"># 对空列表(key 不存在)进行 LSET</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">0</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> lset list <span class="token number">0</span> item <span class="token comment"># 报错</span>
<span class="token punctuation">(</span>error<span class="token punctuation">)</span> ERR no such key

<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> lpush list <span class="token string">&quot;value1&quot;</span> <span class="token comment"># 对非空列表进行 LSET</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> lrange list <span class="token number">0</span> <span class="token number">0</span>
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;value1&quot;</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> lset list <span class="token number">0</span> <span class="token string">&quot;new&quot;</span> <span class="token comment"># 更新值</span>
OK
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> lrange list <span class="token number">0</span> <span class="token number">0</span>
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;new&quot;</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> lset list <span class="token number">1</span> <span class="token string">&quot;new&quot;</span> <span class="token comment"># index 超出范围报错</span>
<span class="token punctuation">(</span>error<span class="token punctuation">)</span> ERR index out of range
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div></li> <li><p><code>ltrim key</code> 指令对一个列表进行修剪(trim)，只保留指定列表中区间内的元素，不在指定区间之内的元素都将被删除</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> rpush mylist <span class="token string">&quot;hello&quot;</span> <span class="token string">&quot;hello&quot;</span> <span class="token string">&quot;hello2&quot;</span> <span class="token string">&quot;hello3&quot;</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">4</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> ltrim mylist <span class="token number">1</span> <span class="token number">2</span>
OK
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> lrange mylist <span class="token number">0</span> <span class="token parameter variable">-1</span>
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;hello&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;hello2&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div></li></ul> <p>List 的数据结构为快速链表 quickList</p> <p>首先在列表元素较少的情况下会使用一块连续的内存存储，这个结构是 ziplist，也即是压缩列表。它将所有的元素紧挨着一起存储，分配的是一块连续的内存。当数据量比较多的时候才会改成 quicklist。因为普通的链表需要的附加指针空间太大，会比较浪费空间。比如这个列表里存的只是 int 类型的数据，结构上还需要两个额外的指针 prev 和 next。</p> <p>Redis 将链表和 ziplist 结合起来组成了 quicklist。也就是将多个 ziplist 使用双向指针串起来使用。这样既满足了快速的插入删除性能，又不会出现太大的空间冗余。</p> <h2 id="集合set"><a href="#集合set" class="header-anchor">#</a> 集合Set</h2> <p>集合 Set 特点：无序，不重复。底层其实是一个 value 为 null 的 hash 表，所以添加，删除，查找的复杂度都是 O(1)</p> <ul><li><p><code>sadd &lt;key&gt; &lt;value1&gt; &lt;value2&gt; ...</code> 指令将一个或多个 member 元素加入到集合 key 中，已经存在的 member 元素将被忽略</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>sadd <span class="token operator">&lt;</span>key<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>value<span class="token operator"><span class="token file-descriptor important">1</span>&gt;</span> <span class="token operator">&lt;</span>value<span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span> <span class="token punctuation">..</span>.
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>例子：</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>sadd k1 v1 v2 v3
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p><code>smembers &lt;key&gt;</code> 指令取出该集合的所有值</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>smembers <span class="token operator">&lt;</span>key<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p><code>sismember &lt;key&gt; &lt;value&gt;</code> 指令判断集合是否为含有该值，有 1，没有 0</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>sismember <span class="token operator">&lt;</span>key<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>value<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li></ul> <p>案例：</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> sadd myset <span class="token string">&quot;hello&quot;</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> sadd myset <span class="token string">&quot;kele&quot;</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> sadd myset <span class="token string">&quot;kele&quot;</span> <span class="token comment"># 重复值不插入 返回 0</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">0</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> smembers myset <span class="token comment"># 查看集合中所有成员</span>
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;kele&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;hello&quot;</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> sismember myset <span class="token string">&quot;hello&quot;</span> <span class="token comment"># 是否是此集合的成员 是 1</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> sismember myset <span class="token string">&quot;world&quot;</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">0</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><ul><li><p><code>scard &lt;key&gt;</code> 指令返回该集合的元素个数</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>scard <span class="token operator">&lt;</span>key<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>例子：</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> scard myset
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">2</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></li> <li><p><code>srem &lt;key&gt; &lt;value1&gt; &lt;value2&gt; ...</code> 指令删除集合中的某个元素</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>srem <span class="token operator">&lt;</span>key<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>value<span class="token operator"><span class="token file-descriptor important">1</span>&gt;</span> <span class="token operator">&lt;</span>value<span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span> <span class="token punctuation">..</span>.
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>例子:</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> srem myset <span class="token string">&quot;kele&quot;</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> smembers myset
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;hello&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div></li> <li><p><code>spop &lt;key&gt;</code> 指令随机从该集合中吐出一个值，key 里就没有该值了</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>spop <span class="token operator">&lt;</span>key<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>例子：</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> smembers myset
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;kele&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;world&quot;</span>
<span class="token number">3</span><span class="token punctuation">)</span> <span class="token string">&quot;hello&quot;</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> spop myset
<span class="token string">&quot;world&quot;</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> spop myset <span class="token number">2</span>
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;kele&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;hello&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div></li> <li><p><code>srandmember &lt;key&gt; &lt;n&gt;</code> 指令随机从该集合中取出 n 个值。不会从集合中删除</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>srandmember <span class="token operator">&lt;</span>key<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>n<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>例子：</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> smembers myset
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;kele&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;world&quot;</span>
<span class="token number">3</span><span class="token punctuation">)</span> <span class="token string">&quot;hello&quot;</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> srandmember myset
<span class="token string">&quot;hello&quot;</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> srandmember myset <span class="token number">2</span>
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;world&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;kele&quot;</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> srandmember myset <span class="token number">2</span>
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;kele&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;hello&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div></li> <li><p><code>smove &lt;key1&gt; &lt;key2&gt; &lt;value&gt;</code> 指令把集合中一个值从一个集合移动到另一个集合，其中 key1 为要获取的集合，key2 为放入的集合</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>smove <span class="token operator">&lt;</span>key<span class="token operator"><span class="token file-descriptor important">1</span>&gt;</span> <span class="token operator">&lt;</span>key<span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span> <span class="token operator">&lt;</span>value<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>例子：</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> sadd myset <span class="token string">&quot;hello&quot;</span> <span class="token comment"># myset 添加元素</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> sadd myset <span class="token string">&quot;world&quot;</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> sadd myset <span class="token string">&quot;kele&quot;</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> sadd myset2 <span class="token string">&quot;set2&quot;</span> <span class="token comment"># myset2 添加元素</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> smove myset myset2 <span class="token string">&quot;kele&quot;</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> smembers myset
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;world&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;hello&quot;</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> smembers myset2
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;kele&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;set2&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div></li> <li><p><code>sinter &lt;key1&gt; &lt;key2&gt;</code> 指令返回两个集合的交集元素</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>sinter <span class="token operator">&lt;</span>key<span class="token operator"><span class="token file-descriptor important">1</span>&gt;</span> <span class="token operator">&lt;</span>key<span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p><code>sunion &lt;key1&gt; &lt;key2&gt;</code> 指令返回两个集合的并集元素</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>sunion <span class="token operator">&lt;</span>key<span class="token operator"><span class="token file-descriptor important">1</span>&gt;</span> <span class="token operator">&lt;</span>key<span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p><code>sdiff &lt;key1&gt; &lt;key2&gt;</code> 指令返回两个集合的差集元素(key1 中的，不包含 key2 中的)</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token function">sdiff</span> <span class="token operator">&lt;</span>key<span class="token operator"><span class="token file-descriptor important">1</span>&gt;</span> <span class="token operator">&lt;</span>key<span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li></ul> <p>案例：</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> sadd key1 <span class="token string">&quot;a&quot;</span> <span class="token comment"># key1</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> sadd key1 <span class="token string">&quot;b&quot;</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> sadd key1 <span class="token string">&quot;c&quot;</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> sadd key2 <span class="token string">&quot;c&quot;</span> <span class="token comment"># key2</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> sadd key2 <span class="token string">&quot;d&quot;</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> sadd key2 <span class="token string">&quot;e&quot;</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> <span class="token function">sdiff</span> key1 key2 <span class="token comment"># 差集</span>
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;a&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;b&quot;</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> sinter key1 key2 <span class="token comment"># 交集</span>
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;c&quot;</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> sunion key1 key2 <span class="token comment"># 并集</span>
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;a&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;b&quot;</span>
<span class="token number">3</span><span class="token punctuation">)</span> <span class="token string">&quot;c&quot;</span>
<span class="token number">4</span><span class="token punctuation">)</span> <span class="token string">&quot;e&quot;</span>
<span class="token number">5</span><span class="token punctuation">)</span> <span class="token string">&quot;d&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><p>在微博中，可以将一个用户所有的关注人存在一个集合中，将其所有粉丝存在一个集合。Redis 还为集合提供了求交集、并集、差集等操作，可以非常方便的实现如共同关注、共同喜好、二度好友等功能，对上面的所有集合操作，你还可以使用不同的命令选择将结果返回给客户端还是存集到一个新的集合中。</p> <h2 id="哈希hash"><a href="#哈希hash" class="header-anchor">#</a> 哈希Hash</h2> <p>特点：键值对集合，也是一个 string 类型的 field 和 value 的映射表，hash 特别适合用于存储对象。</p> <p>类似与 Java 的 <code>Map&lt;String, Map&lt;Object,Object&gt;&gt;</code>，即双 Map。</p> <p>通过 key(用户 ID) + field(属性标签) 就可以操作对应属性数据了，既不需要重复存储数据，也不会带来序列化和并发修改控制的问题</p> <ul><li><p><code>hset &lt;key&gt; &lt;field1&gt; &lt;value&gt; &lt;field2&gt; &lt;value&gt; ...</code> 指令给集合 key 的 filed 键赋值 value，批量也可以，4.0 之前是 hmset，现在 hset 也可以批量添加</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>hset <span class="token operator">&lt;</span>key<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>field<span class="token operator"><span class="token file-descriptor important">1</span>&gt;</span> <span class="token operator">&lt;</span>value<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>field<span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span> <span class="token operator">&lt;</span>value<span class="token operator">&gt;</span> <span class="token punctuation">..</span>.
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>例子：</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>hset user:1000 name kele age <span class="token number">18</span> gender boy
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p><code>hget &lt;key&gt; &lt;field&gt;</code> 指令从 key 集合取出 value</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>hget <span class="token operator">&lt;</span>key<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>field<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>例子：</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>hget user:1000 name
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p><code>hexists &lt;key&gt; &lt;field&gt;</code> 指令查看哈希表 key 中，给定域 field 是否存在</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>hexists <span class="token operator">&lt;</span>key<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>field<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>例子：</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> hexists myhash field1
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> hexists myhash field3
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">0</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div></li> <li><p><code>hkeys &lt;key&gt;</code> 指令列出该 hash 集合的所有 field</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>hkeys <span class="token operator">&lt;</span>key<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p><code>hvals &lt;key&gt;</code> 指令列出该 hash 集合的所有 value</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>hvals <span class="token operator">&lt;</span>key<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>例子：</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> hkeys myhash
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;field2&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;field1&quot;</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> hvals myhash
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;World&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;Hello&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div></li> <li><p><code>hincrby &lt;key&gt; &lt;field&gt; &lt;increment&gt;</code> 指令为哈希表 key 中的域 field 的值加上增量</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>hincrby <span class="token operator">&lt;</span>key<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>field<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>increment<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>例子：</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> hset myhash field <span class="token number">5</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> hincrby myhash field <span class="token number">1</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">6</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> hincrby myhash field <span class="token parameter variable">-1</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">5</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> hincrby myhash field <span class="token parameter variable">-10</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token parameter variable">-5</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div></li> <li><p><code>hsetnx &lt;key&gt; &lt;filed&gt; &lt;value&gt;</code> 指令将哈希表 key 中的域 field 的值设置为 value ，当且仅当域 field 不存在</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>hsetnx <span class="token operator">&lt;</span>key<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>filed<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>value<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>例子：</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> hsetnx myhash field1 <span class="token string">&quot;hello&quot;</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span> 	<span class="token comment"># 设置成功，返回 1 。</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> hsetnx myhash field1 <span class="token string">&quot;world&quot;</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">0</span> 	<span class="token comment"># 如果给定字段已经存在，返回 0</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> hget myhash field1
<span class="token string">&quot;hello&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div></li></ul> <h2 id="有序集合zset"><a href="#有序集合zset" class="header-anchor">#</a> 有序集合Zset</h2> <p>有序集合 zset 与普通集合 set 非常相似，是一个没有重复元素的字符串集合。</p> <p>不同之处是有序集合的每个成员都关联了一个评分（score），这个评分（score）被用来按照从最低分到最高分的方式排序集合中的成员。集合的成员是唯一的，但是评分可以是重复。</p> <ul><li><p><code>zadd &lt;key&gt; &lt;score1&gt; &lt;value1&gt; &lt;score2&gt; &lt;value2&gt; ...</code> 指令将一个或多个 member 元素及其 score 值加入到有序集 key 当中</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>zadd <span class="token operator">&lt;</span>key<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>score<span class="token operator"><span class="token file-descriptor important">1</span>&gt;</span> <span class="token operator">&lt;</span>value<span class="token operator"><span class="token file-descriptor important">1</span>&gt;</span> <span class="token operator">&lt;</span>score<span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span> <span class="token operator">&lt;</span>value<span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span> <span class="token punctuation">..</span>.
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>例如：</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>zadd topn <span class="token number">1000</span> <span class="token function">java</span> <span class="token number">800</span> c++ <span class="token number">600</span> php <span class="token number">400</span> js
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p><code>zrange &lt;key&gt; &lt;start&gt; &lt;stop&gt; [withscores]</code> 指令返回有序集 key 中，下标在 start 和 stop 之间的元素</p> <p>带 WITHSCORES，可以让分数一起和值返回到结果集</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>zrange <span class="token operator">&lt;</span>key<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>start<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>stop<span class="token operator">&gt;</span> <span class="token punctuation">[</span>withscores<span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>例如：(0 和 -1 代表查询所有)</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> zrange topn <span class="token number">0</span> <span class="token parameter variable">-1</span> withscores
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;java&quot;</span> <span class="token number">1000</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;c++&quot;</span> <span class="token number">800</span>
<span class="token number">3</span><span class="token punctuation">)</span> <span class="token string">&quot;php&quot;</span> <span class="token number">600</span>
<span class="token number">4</span><span class="token punctuation">)</span> <span class="token string">&quot;js&quot;</span> <span class="token number">400</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><ul><li><p><code>zrevrange &lt;key&gt; &lt;start&gt; &lt;stop&gt; [withscores]</code> 指令同上，改为从大到小排列</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>zrevrange <span class="token operator">&lt;</span>key<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>start<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>stop<span class="token operator">&gt;</span> <span class="token punctuation">[</span>withscores<span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li></ul></li> <li><p><code>zrangebyscore &lt;key&gt; &lt;min&gt; &lt;max&gt; [withscores] [limit offset count]</code> 指令返回有序集 key 中，所有 score 值介于 min 和 max 之间（包括等于 min 或 max）的成员。 有序集成员按 score 值递增（从小到大）次序排列</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>zrangebyscore <span class="token operator">&lt;</span>key<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>min<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>max<span class="token operator">&gt;</span> <span class="token punctuation">[</span>withscores<span class="token punctuation">]</span> <span class="token punctuation">[</span>limit offset count<span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li><p><code>zrevrangebyscore &lt;key&gt; &lt;min&gt; &lt;max&gt; [withscores] [limit offset count]</code> 指令同上，改为从大到小排列</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>zrevrangebyscore <span class="token operator">&lt;</span>key<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>min<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>max<span class="token operator">&gt;</span> <span class="token punctuation">[</span>withscores<span class="token punctuation">]</span> <span class="token punctuation">[</span>limit offset count<span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li></ul> <p>例子：</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> zadd salary <span class="token number">2500</span> xiaoming
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> zadd salary <span class="token number">5000</span> xiaohong
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> zadd salary <span class="token number">500</span> kele
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>

<span class="token comment"># Inf 无穷大量 +∞,同样地,-∞ 可以表示为 -Inf。</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> zrangebyscore salary <span class="token parameter variable">-inf</span> +inf <span class="token comment"># 显示整个有序集</span>
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;kele&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;xiaoming&quot;</span>
<span class="token number">3</span><span class="token punctuation">)</span> <span class="token string">&quot;xiaohong&quot;</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> zrangebyscore salary <span class="token parameter variable">-inf</span> +inf withscores <span class="token comment"># 递增排列</span>
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;kele&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;500&quot;</span>
<span class="token number">3</span><span class="token punctuation">)</span> <span class="token string">&quot;xiaoming&quot;</span>
<span class="token number">4</span><span class="token punctuation">)</span> <span class="token string">&quot;2500&quot;</span>
<span class="token number">5</span><span class="token punctuation">)</span> <span class="token string">&quot;xiaohong&quot;</span>
<span class="token number">6</span><span class="token punctuation">)</span> <span class="token string">&quot;5000&quot;</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> zrevrange salary <span class="token number">0</span> <span class="token parameter variable">-1</span> withscores <span class="token comment"># 递减排列</span>
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;xiaohong&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;5000&quot;</span>
<span class="token number">3</span><span class="token punctuation">)</span> <span class="token string">&quot;xiaoming&quot;</span>
<span class="token number">4</span><span class="token punctuation">)</span> <span class="token string">&quot;2500&quot;</span>
<span class="token number">5</span><span class="token punctuation">)</span> <span class="token string">&quot;kele&quot;</span>
<span class="token number">6</span><span class="token punctuation">)</span> <span class="token string">&quot;500&quot;</span>
<span class="token comment"># 显示工资 &lt;= 2500 的所有成员</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> zrangebyscore salary <span class="token parameter variable">-inf</span> <span class="token number">2500</span> withscores 
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;kele&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;500&quot;</span>
<span class="token number">3</span><span class="token punctuation">)</span> <span class="token string">&quot;xiaoming&quot;</span>
<span class="token number">4</span><span class="token punctuation">)</span> <span class="token string">&quot;2500&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br></div></div></li> <li><p><code>zincrby &lt;key&gt; &lt;increment&gt; &lt;value&gt;</code> 指令为元素的 score 加上增量</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>zincrby <span class="token operator">&lt;</span>key<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>increment<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>value<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p><code>zrem &lt;key&gt; &lt;value&gt;</code> 指令删除该集合下，指定值的元素</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>zrem <span class="token operator">&lt;</span>key<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>value<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>例子：</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> zrange salary <span class="token number">0</span> <span class="token parameter variable">-1</span>
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;kele&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;xiaoming&quot;</span>
<span class="token number">3</span><span class="token punctuation">)</span> <span class="token string">&quot;xiaohong&quot;</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> zrem salary kele
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> zrange salary <span class="token number">0</span> <span class="token parameter variable">-1</span>
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;xiaoming&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;xiaohong&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div></li> <li><p><code>zcount &lt;key&gt; &lt;min&gt; &lt;max&gt;</code> 指令统计该集合，分数区间内的元素个数</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>zcount <span class="token operator">&lt;</span>key<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>min<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>max<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>例子：</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> zadd myset <span class="token number">1</span> <span class="token string">&quot;hello&quot;</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> zadd myset <span class="token number">2</span> <span class="token string">&quot;world&quot;</span> <span class="token number">3</span> <span class="token string">&quot;kele&quot;</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">2</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> zcount myset <span class="token number">1</span> <span class="token number">3</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">3</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> zcount myset <span class="token number">1</span> <span class="token number">2</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">2</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div></li> <li><p><code>zrank &lt;key&gt; &lt;value&gt;</code> 指令返回该值在集合中的排名，从 0 开始</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>zrank <span class="token operator">&lt;</span>key<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>value<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>例子：</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> zadd salary <span class="token number">2500</span> xiaoming
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> zadd salary <span class="token number">5000</span> xiaohong
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> zadd salary <span class="token number">500</span> kele
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> zrange salary <span class="token number">0</span> <span class="token parameter variable">-1</span> withscores <span class="token comment"># 显示所有成员及其 score 值</span>
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;kele&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;500&quot;</span>
<span class="token number">3</span><span class="token punctuation">)</span> <span class="token string">&quot;xiaoming&quot;</span>
<span class="token number">4</span><span class="token punctuation">)</span> <span class="token string">&quot;2500&quot;</span>
<span class="token number">5</span><span class="token punctuation">)</span> <span class="token string">&quot;xiaohong&quot;</span>
<span class="token number">6</span><span class="token punctuation">)</span> <span class="token string">&quot;5000&quot;</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> zrank salary kele <span class="token comment"># 显示 kele 的薪水排名，最少</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">0</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> zrank salary kele <span class="token comment"># 显示 xiaohong 的薪水排名，第三</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">2</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div></li> <li><p><code>zrevrank &lt;key&gt; &lt;value&gt;</code> 指令返回有序集中成员的排名。其中有序集成员按分数值递减(从大到小)排序</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>zrevrank <span class="token operator">&lt;</span>key<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>value<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>例子：</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> zrevrank salary kele
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">2</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> zrevrank salary kele
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">0</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div></li></ul> <p>案例：利用 zset 实现一个文章访问量的排行榜</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>zadd topn <span class="token number">1000</span> <span class="token function">java</span> <span class="token number">800</span> c++ <span class="token number">600</span> php <span class="token number">400</span> js  <span class="token comment"># 添加文章以及评分</span>
zrevrange topn <span class="token number">0</span> <span class="token number">9</span> withscores <span class="token comment"># 评分从大到小查询</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>SortedSet(zset)是 Redis 提供的一个非常特别的数据结构，一方面它等价于 Java 的数据结构 Map，可以给每一个元素 value 赋予一个权重 score，另 一方面它又类似于 TreeSet，内部的元素会按照权重 score 进行排序，可以得到每个元素的名次，还可以通过 score 的范围来获取元素的列表。</p> <p>zset 底层使用了两个数据结构：</p> <ul><li><p>hash，hash 的作用就是关联元素 value 和权重 score，保障元素 value 的唯一性，可以通过元素 value 找到相应的 score 值。</p></li> <li><p>跳跃表，跳跃表的目的在于给元素 value 排序，根据 score 的范围获取元素列表。</p></li></ul> <h2 id="指令总结"><a href="#指令总结" class="header-anchor">#</a> 指令总结</h2> <p>虽然看了五个数据类型的 API 和例子，但是两者混为一起，难免心生抵触，不想看例子，这里以表格形式总结 API，不参杂任何例子。</p> <h3 id="键-key-命令-2"><a href="#键-key-命令-2" class="header-anchor">#</a> 键(key)命令</h3> <table><thead><tr><th>指令</th> <th>含义</th></tr></thead> <tbody><tr><td>dbsize</td> <td>查看当前数据库的 key 的数量</td></tr> <tr><td>keys *</td> <td>指令查看当前库所有 key</td></tr> <tr><td>exists key</td> <td>指令判断某个 key 是否存在</td></tr> <tr><td>type key</td> <td>指令查看 key 的类型是哪个</td></tr> <tr><td>del key</td> <td>指令删除指定的 key</td></tr> <tr><td>unlink key</td> <td>指令根据 value 选择非阻塞删除（先将 keys 从 keysapce 元数据中删除，真正的删除会在后续异步操作）</td></tr> <tr><td>expire key time</td> <td>指令给指定的 key 设置过期时间（time 以秒为单位），当 key 过期时(生存时间为 0 )，它会被自动删除</td></tr> <tr><td>ttl key</td> <td>指令查看 key 还有多少秒过期，-1 表示永不过期，-2 表示已过期</td></tr> <tr><td>select num</td> <td>指令选择数据库，num 代表从 0-16，默认是 0</td></tr> <tr><td>flushdb</td> <td>清空当前库</td></tr> <tr><td>flushall</td> <td>清空所有库</td></tr></tbody></table> <h3 id="字符串string-2"><a href="#字符串string-2" class="header-anchor">#</a> 字符串String</h3> <table><thead><tr><th>指令</th> <th>含义</th></tr></thead> <tbody><tr><td>set &lt;key&gt; &lt;value&gt;</td> <td>添加键值对，如果 key 已经存在则覆盖 value</td></tr> <tr><td>get &lt;key&gt;</td> <td>查看对应键值</td></tr> <tr><td>append &lt;key&gt; &lt;value&gt;</td> <td>追加到原值的末尾</td></tr> <tr><td>strlen &lt;key&gt;</td> <td>获得值的长度</td></tr> <tr><td>setnx &lt;key&gt; &lt;value&gt;</td> <td>只有 key 不存在时，才加入该 key 的值</td></tr> <tr><td>incr &lt;key&gt;</td> <td>将 key 中储存的数字值增 1，只能对数字值操作，如果为空，新增值为 1</td></tr> <tr><td>decr &lt;key&gt;</td> <td>将 key 中储存的数字值减 1，只能对数字值操作，如果为空，新增值为 -1</td></tr> <tr><td>incrby / decrby &lt;步长&gt;</td> <td>将 key 中储存的数字值增减。自定义步长</td></tr> <tr><td>mset &lt;key1&gt; &lt;value&gt; &lt;key2&gt; &lt;value2&gt; ......</td> <td>设置一个或者多个 key-value 键值对</td></tr> <tr><td>mget &lt;key1&gt; &lt;key2&gt; ......</td> <td>获取一个或者多个 key-value 键值对</td></tr> <tr><td>msetnx &lt;key1&gt; &lt;value&gt; &lt;key2&gt; &lt;value2&gt; ......</td> <td>同时设置一个或多个 key-value 对，当且仅当所有给定 key 都不存在</td></tr> <tr><td>getrange &lt;key&gt; &lt;起始位置&gt; &lt;结束位置&gt;</td> <td>获得值的范围，类似 java 中的 substring</td></tr> <tr><td>getrange &lt;key&gt; &lt;起始位置&gt; &lt;value&gt;</td> <td>用 value 覆写所储存的字符串值，从 &lt;起始位置&gt; 开始(索引从 0 开始)</td></tr> <tr><td>setrange &lt;key&gt; &lt;位置&gt; &lt;newValue&gt;</td> <td>设置指定区间范围内的值</td></tr> <tr><td>setex &lt;key&gt; &lt;过期时间/秒&gt; &lt;value&gt;</td> <td>设置键值的同时，设置过期时间，单位秒</td></tr> <tr><td>psetex &lt;key&gt; &lt;过期时间/毫秒&gt; &lt;value&gt;</td> <td>设置键值的同时，设置过期时间，单位毫秒</td></tr> <tr><td>getset &lt;key&gt; &lt;value&gt;</td> <td>以新换旧，设置了新值同时获得旧值</td></tr> <tr><td>set user:1 value（json数据）</td> <td>存储对象</td></tr></tbody></table> <h3 id="列表list-2"><a href="#列表list-2" class="header-anchor">#</a> 列表List</h3> <table><thead><tr><th>指令</th> <th>含义</th></tr></thead> <tbody><tr><td>lpush/rpush &lt;key&gt; &lt;value1&gt; &lt;value2&gt; &lt;value3&gt; ...</td> <td>从左边/右边插入一个或多个值，左右也就是首尾</td></tr> <tr><td>lrange &lt;key&gt; &lt;start&gt; &lt;stop&gt;</td> <td>按照索引下标获得元素(从左到右，先进后出)</td></tr> <tr><td>lrange &lt;key&gt; 0 -1</td> <td>如果 start 是 0，stop 是 -1，代表获取所有元素</td></tr> <tr><td>lindex &lt;key&gt; &lt;index&gt;</td> <td>按照索引下标获得元素(从左到右)（-1 代表最后一个，0 代表是第一个）</td></tr> <tr><td>lpop/rpop &lt;key&gt;</td> <td>从左边/右边吐出一个值。吐出后该值就不存在 key 中</td></tr> <tr><td>rpoplpush &lt;key1&gt; &lt;key2&gt;</td> <td>列表右边吐出一个值，插到列表左边，其中 key1 是 rpop 的 key，key2 是 lpush 的 key</td></tr> <tr><td>llen &lt;key&gt;</td> <td>获得列表长度</td></tr> <tr><td>linsert &lt;key&gt; before/after &lt;value&gt; &lt;newValue&gt;</td> <td>在元素某个值的前面/后面插入新值，如果 value 有多个，则插入最前面的那个</td></tr> <tr><td>lrem &lt;key&gt; &lt;n&gt; &lt;value&gt;</td> <td>从左边删除 n 个 value(从左到右)，如果有多个一样的 lement，则删除列表最前面的的</td></tr> <tr><td>lset &lt;key&gt; &lt;index&gt; &lt;value&gt;</td> <td>将列表 key 下标为 index 的值替换成 value</td></tr> <tr><td>ltrim key</td> <td>对一个列表进行修剪(trim)，只保留指定列表中区间内的元素，不在指定区间之内的元素都将被删除</td></tr></tbody></table> <h3 id="集合set-2"><a href="#集合set-2" class="header-anchor">#</a> 集合Set</h3> <table><thead><tr><th>指令</th> <th>含义</th></tr></thead> <tbody><tr><td>sadd &lt;key&gt; &lt;value1&gt; &lt;value2&gt; ...</td> <td>将一个或多个 member 元素加入到集合 key 中，已经存在的 member 元素将被忽略</td></tr> <tr><td>smembers &lt;key&gt;</td> <td>取出该集合的所有值</td></tr> <tr><td>sismember &lt;key&gt; &lt;value&gt;</td> <td>判断集合是否为含有该值，有 1，没有 0</td></tr> <tr><td>scard &lt;key&gt;</td> <td>返回该集合的元素个数</td></tr> <tr><td>srem &lt;key&gt; &lt;value1&gt; &lt;value2&gt; ...</td> <td>删除集合中的某个元素</td></tr> <tr><td>spop &lt;key&gt;</td> <td>随机从该集合中吐出一个值，key 里就没有该值了</td></tr> <tr><td>srandmember &lt;key&gt; &lt;n&gt;</td> <td>随机从该集合中取出 n 个值。不会从集合中删除</td></tr> <tr><td>smove &lt;key1&gt; &lt;key2&gt; &lt;value&gt;</td> <td>把集合中一个值从一个集合移动到另一个集合，其中 key1 为要获取的集合，key2 为放入的集合</td></tr> <tr><td>sinter &lt;key1&gt; &lt;key2&gt;</td> <td>返回两个集合的交集元素</td></tr> <tr><td>sunion &lt;key1&gt; &lt;key2&gt;</td> <td>返回两个集合的并集元素</td></tr> <tr><td>sdiff &lt;key1&gt; &lt;key2&gt;</td> <td>返回两个集合的差集元素(key1 中的，不包含 key2 中的)</td></tr></tbody></table> <h3 id="哈希hash-2"><a href="#哈希hash-2" class="header-anchor">#</a> 哈希Hash</h3> <table><thead><tr><th>指令</th> <th>含义</th></tr></thead> <tbody><tr><td>hset &lt;key&gt; &lt;field1&gt; &lt;value&gt; &lt;field2&gt; &lt;value&gt; ...</td> <td>给集合 key 的 filed 键赋值 value，批量也可以，4.0 之前是 hmset，现在 hset 也可以批量添加</td></tr> <tr><td>hget &lt;key&gt; &lt;field&gt;</td> <td>从 key 集合取出 value</td></tr> <tr><td>hexists &lt;key&gt; &lt;field&gt;</td> <td>查看哈希表 key 中，给定域 field 是否存在</td></tr> <tr><td>hkeys &lt;key&gt;</td> <td>列出该 hash 集合的所有 field</td></tr> <tr><td>hvals &lt;key&gt;</td> <td>列出该 hash 集合的所有 value</td></tr> <tr><td>hincrby &lt;key&gt; &lt;field&gt; &lt;increment&gt;</td> <td>为哈希表 key 中的域 field 的值加上增量</td></tr> <tr><td>hsetnx &lt;key&gt; &lt;filed&gt; &lt;value&gt;</td> <td>将哈希表 key 中的域 field 的值设置为 value ，当且仅当域 field 不存在</td></tr></tbody></table> <h3 id="有序集合zset-2"><a href="#有序集合zset-2" class="header-anchor">#</a> 有序集合Zset</h3> <table><thead><tr><th>指令</th> <th>含义</th></tr></thead> <tbody><tr><td>zadd &lt;key&gt; &lt;score1&gt; &lt;value1&gt; &lt;score2&gt; &lt;value2&gt; ...</td> <td>将一个或多个 member 元素及其 score 值加入到有序集 key 当中</td></tr> <tr><td>zrange &lt;key&gt; &lt;start&gt; &lt;stop&gt; [withscores]</td> <td>返回有序集 key 中，下标在 star t和 stop 之间的元素，带 WITHSCORES，可以让分数一起和值(从小到大)返回到结果集</td></tr> <tr><td>zrevrange &lt;key&gt; &lt;start&gt; &lt;stop&gt; [withscores]</td> <td>同上，改为从大到小排列</td></tr> <tr><td>zrangebyscore &lt;key&gt; &lt;min&gt; &lt;max&gt; [withscores] [limit offset count]</td> <td>返回有序集 key 中，所有 score 值介于 min 和 max 之间(包括等于 min 或 max )的成员。 有序集成员按 score 值递增(从小到大)次序排列</td></tr> <tr><td>zrevrangebyscore &lt;key&gt; &lt;min&gt; &lt;max&gt; [withscores] [limit offset count]</td> <td>同上，改为从大到小排列</td></tr> <tr><td>zincrby &lt;key&gt; &lt;increment&gt; &lt;value&gt;</td> <td>为元素的 score 加上增量</td></tr> <tr><td>zrem &lt;key&gt; &lt;value&gt;</td> <td>删除该集合下，指定值的元素</td></tr> <tr><td>zcount &lt;key&gt; &lt;min&gt; &lt;max&gt;</td> <td>统计该集合，分数区间内的元素个数</td></tr> <tr><td>zrank &lt;key&gt; &lt;value&gt;</td> <td>返回该值在集合中的排名，从 0 开始</td></tr> <tr><td>zrevrank &lt;key&gt; &lt;value&gt;</td> <td>返回有序集中成员的排名。其中有序集成员按分数值递减(从大到小)排序</td></tr></tbody></table></div></div> <!----> <div class="page-edit"><div class="edit-link"><a href="https://github.com/Somnus711/Somnus711.github.io/edit/master/docs/20.数据库/10.缓存数据库 - Redis/06.Redis - 五大数据类型及API.md" target="_blank" rel="noopener noreferrer">编辑此页</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="tags"><a href="/tags/?tag=%E7%BC%93%E5%AD%98%E6%95%B0%E6%8D%AE%E5%BA%93" title="标签">#缓存数据库</a></div> <div class="last-updated"><span class="prefix">更新时间:</span> <span class="time">2025/04/06, 01:04:59</span></div></div> <div class="page-nav-wapper"><div class="page-nav-centre-wrap"><a href="/redis/install/" class="page-nav-centre page-nav-centre-prev"><div class="tooltip">Redis - 安装</div></a> <a href="/redis/new-types/" class="page-nav-centre page-nav-centre-next"><div class="tooltip">Redis - 新增三大数据类型</div></a></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/redis/install/" class="prev">Redis - 安装</a></span> <span class="next"><a href="/redis/new-types/">Redis - 新增三大数据类型</a>→
      </span></p></div></div></div> <div class="article-list"><div class="article-title"><a href="/archives/" class="iconfont icon-bi">最近更新</a></div> <div class="article-wrapper"><dl><dd>01</dd> <dt><a href="/ep/magic-change/"><div>
            技术随笔 - Element Plus 修改包名
            <span class="title-tag">
              原创
            </span></div></a> <span class="date">11-02</span></dt></dl><dl><dd>02</dd> <dt><a href="/reactor/extensibility/"><div>
            Reactor - 扩展性
            <!----></div></a> <span class="date">11-02</span></dt></dl><dl><dd>03</dd> <dt><a href="/reactor/best-practices/"><div>
            Reactor - 最佳实践
            <!----></div></a> <span class="date">11-02</span></dt></dl> <dl><dd></dd> <dt><a href="/archives/" class="more">更多文章&gt;</a></dt></dl></div></div></main></div> <div class="footer"><div class="icons"><a href="mailto:haoyuan1996@qq.com" title="发邮件" target="_blank" class="iconfont icon-youjian"></a><a href="https://github.com/Somnus711" title="GitHub" target="_blank" class="iconfont icon-github"></a><a href="https://music.163.com/#" title="听音乐" target="_blank" class="iconfont icon-erji"></a></div> 
  Theme by
  <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" title="本站主题">Vdoing</a> 
    | Copyright © 2021-2025
    <span>Somnus Haoyuan | <a href="https://github.com/Somnus711/Somnus711.github.io/blob/main/LICENSE" target="_blank">MIT
            License</a><br />
        <a target="_blank" href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=11010802034042"
            style="display:inline-block;text-decoration:none;height:20px;line-height:20px;"><img
                src="https://cdn.jsdelivr.net/gh/Somnus711/picx-image-hosting@master/blog-pic/备案图标.3ph98jsceq0w.webp" style="float:left;" />
            <span>京公网安备 11010802034042号</span>
        </a>
        <a target="_blank" href="https://beian.miit.gov.cn"
            style="display:inline-block;text-decoration:none;height:20px;line-height:20px;padding-left: 10px;">
            <span>京ICP备2020033847号-1</span></a></span></div> <div class="buttons"><div title="返回顶部" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="去评论" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="主题模式" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">
          跟随系统
        </li><li class="iconfont icon-rijianmoshi">
          浅色模式
        </li><li class="iconfont icon-yejianmoshi">
          深色模式
        </li><li class="iconfont icon-yuedu">
          阅读模式
        </li></ul></div></div> <div class="body-bg" style="background:url() center center / cover no-repeat;opacity:0.5;"></div> <!----> <!----></div><div class="global-ui"><div></div><div></div><div></div><div id="tcomment"></div><!----><div></div></div></div>
    <script src="/assets/js/app.0a0131c5.js" defer></script><script src="/assets/js/2.84f16386.js" defer></script><script src="/assets/js/165.5ca92248.js" defer></script><script src="/assets/js/15.107d5767.js" defer></script><script src="/assets/js/5.1ffba6c1.js" defer></script><script src="/assets/js/9.dba8a9bf.js" defer></script><script src="/assets/js/12.f955b8f4.js" defer></script>
  </body>
</html>
