---
title: 云原生开学第一课
date: 2022-04-10 23:53:49
permalink: /pages/343e92/
categories:
  - 技术
  - 云原生
  - 华为云云原生王者之路集训营黄金课程
tags:
  - 
---
# 华为云云原生黄金课程01--云原生开学第一课

## 1.1 云原生技术发展历程

云原生是对于整个云计算的发展历程中的对于理念的继承和延伸。站在用户的角度，从时间的尺度来看，整个云计算的技术是朝着越来越灵活的方向去发展的。从最早的物理服务器，到虚拟化，到私有的基础设施的云平台IaaS，到后来的平台即服务PaaS，到中间开源的IaaS和开源PaaS，到容器的出现应用，再到现在的通过Kubernetes调度编排的容器。整个的核心单元是变得越来越小的，资源分配的颗粒度也是越来越小的，启动速度变得越来越快。资源的代价变得越来越低之后，不可变的基础设施成为了一个热门的方向，而整个软件的技术栈也从传统闭源的商业软件走向开源为主的软件生态，用户在整个开源生态中有了更多的选择。

![image-20220404223830653](https://cdn.jsdelivr.net/gh/Somnus711/picx-image-hosting@master/image-20220404223830653.5ifds4tmmlxc.png)

云的资源从使用者的角度是无限可扩展的，随用随取，按需使用，这种特性就使得可以像使用水电一样使用IT的基础设施。Kubernetes作为云原生中众多的开源平台之一，主要是凭借其先进的架构理念和活跃的生态去持续地引领业界的发展的热度。Kubernetes也是近30年来增长最快的开源项目之一，根据CNCF最新的调查显示，Kubernetes已经成为了约定俗成的容器编排器，有超过82%的单位在生产环境中使用到Kubernetes。

![image-20220404224550003](https://cdn.jsdelivr.net/gh/Somnus711/picx-image-hosting@master/image-20220404224550003.7jjwzp83v6kg.png)

Kubernetes的出现带动了云原生生态的蓬勃发展，在整个IT技术的发展史上都是有突破性的。从2015年CNCF只有一个官方项目，到如今有80多个官方项目，并且整个云原生的生态中有非常丰富的宏大的技术版图。从底层有非常多的容器运行时，云原生存储，云原生网络，以及硬件加速的方案可以选择。面向用户，面向业务，Kubernetes的北向可以去运行和对接各种业界主流的数据库、中间件以及CI/CD工具链等等。目前市场上，通过Kubernetes认证的云服务或者发行版已经超过了130多种，并且整个生态中有大量的厂商围绕着云原生的技术栈提供丰富的软件和服务配套的支持。

![image-20220404225801013](https://cdn.jsdelivr.net/gh/Somnus711/picx-image-hosting@master/image-20220404225801013.3fouqnrwfj28.png)

在国内，从2015年只有华为一家初创会员，一直到今天CNCF在中国有了60多家成员单位。这个增长是非常迅速的。从全球来看Kubernetes有四分之一的服务商是来自于中国，接近三分之一的Kubernetes的培训发生在中国，并且中国也是CNCF生态第三大贡献者，CNCF管理的80多个官方项目中有11个是来自于中国。

![image-20220404230127466](https://cdn.jsdelivr.net/gh/Somnus711/picx-image-hosting@master/image-20220404230127466.1hxfild6h6yo.png)

整个云原生的产业规模在中国也是发展的十分迅猛。调查显示，2019年中国的云原生市场规模约为350.2亿元，并且云原生技术加速地向各个行业垂直地渗透。现阶段已有9%的用户云原生相关投入已占总IT投入的一半以上。技术研发、运维是企业的主要两个支出部分。

![image-20220404230842005](https://cdn.jsdelivr.net/gh/Somnus711/picx-image-hosting@master/image-20220404230842005.5gepsfmkge80.png)

云原生的采用率也在持续提升，以容器为例，2020年已经有超过68%的企业在生产环境中使用容器的技术，相比两年前增长超过200%。Kubernetes的使用比例也在惊人地持续升高，从19年的72%增长到了82%，可以说Kubernetes已经无处不在。

![image-20220404231519322](https://cdn.jsdelivr.net/gh/Somnus711/picx-image-hosting@master/image-20220404231519322.5awer7crufsw.png)

CNCF（Cloud Native Computing Foundation 云原生计算基金会）对云原生的定义为云原生技术有利于各组织在公有云、私有云和混合云等新型动态环境中，构建和运行可弹性扩展的应用。云原生的代表技术包括容器、服务网格、微服务、不可变基础设施和声明式API。

值得一提的是，在近几年云原生的发展中呈现了几个明显的趋势。第一个是软硬件的一体化。传统的基础设施如网络、存储、计算能力更多地是围绕着资源的维度，随着云原生的技术发展，基础设施开始与云原生技术生态进行深度对接。第二个是基于服务网格的治理能力。服务治理与业务逐步解耦，服务治理能力下沉到基础设施，服务网格以基础设施的方式提供无侵入的连接控制、安全、可监控性、灰度发布等治理能力。第三个是有状态应用或者复杂的传统业务也在加速地向云原生迁移。早些年，云原生更多地是服务于无状态的应用或者计算任务类的应用，整个运维和部署管理是相对简单的，随着Kubernetes控制器模式Operator的普及，为有状态应用在云原生基础设施上运行提供了一套行之有效的标准规范，降低了使用门槛，使有状态应用得以真正发展。第四个是多云统一管理和多云业务流量统一调度。云原生北向API趋于稳定，客户更多开始关注跨区域、跨平台、跨云的大规模可复制能力。

![image-20220404232401173](https://cdn.jsdelivr.net/gh/Somnus711/picx-image-hosting@master/image-20220404232401173.3hel9q0dttq8.png)

## 1.2 云原生核心理念

云原生为什么会在云计算的发展历程中脱颖而出呢？这与它先进的理念是分不开的。总的来说有一下几点，一个是利用像容器和服务网格技术，非常好地解耦了软件开发和部署运维，让业务的开发团队更加地聚焦于业务自身的开发，让运维的团队更多地聚焦于环境的部署和调优，对整个业务的灵活性和易维护性有了一个非常好的提升。其次，以Kubernetes为核心的多层次的丰富的开源软件栈已经被各大厂商所接受，基本上现在业界主流的云服务商或IT服务商都提供基于云原生标准软件栈的产品和服务。对于用户来说他们的选择非常的多，并且是基于互操作性非常强的这些产品选择的背景之下，非常大程度地避免了厂商的绑定。第三点，以Kubernetes为核心的松耦合的平台架构，可以非常有效地避免侵入式的定制。Kubernetes已被公认是platform for platform。第四点，围绕整个云原生的技术栈，他的一个核心的对于资源管理和应用编排调度理念是一种中心式的编排过程，对于整个资源利用率和工作效率的提升是非常巨大的。

![image-20220405172351084](https://cdn.jsdelivr.net/gh/Somnus711/picx-image-hosting@master/image-20220405172351084.5t5r77ynq48w.png)

这里展开说说云原生的两个代表技术加深理解。一个是声明式API，在Kubernetes中是一个最核心的理念，与传统命令式API的关键差别是用户往往是针对期望状态或者运行的结果给出声明，而不是针对过程。系统需要做什么样的动作是根据用户的声明，期望状态和当前资源在系统中运行的实际状态来做差异分析，来得出相关动作的判断。实际上，声明式API在大型分布式系统中是非常有利于去屈驾于一个收敛的稳定的一个状态，非常容易去做像中间状态的合并等等的工作。另外，Kubernetes在API设计上采用的是对象互补组合这样一种模式，区别于以往的编程技术中大家广为人知的继承的模式。这种API有个非常的大的好处是整个系统最终的运行、资源的调度包括核心单元Pod可以围绕着最重要的也就是容器中运行的业务代码。针对于不同的视角，比如说定义部署业务，Kubernetes提供了Workload这种多种类型的抽象，让用户有一个直观的感受，可以去结合业务的特点去定义自己的Workload的类型。那么针对像应用、业务对外提供服务，Kubernetes有像Service、Ingress这样的API去帮你定义服务数据交互层的命令的特征。同时对于持续的运维，有像Pod AutoScaler、Disruption Budget这种偏运维、动态伸缩管理的API来支持。最后，是业务运行的一些基础设施拆分的声明，比如说数据卷、配置分离的ConfigMap以及Secret。Kubernetes的声明式API已经成为了当下面向开发者的全新分布式原语。

![image-20220405215811921](https://cdn.jsdelivr.net/gh/Somnus711/picx-image-hosting@master/image-20220405215811921.4ofq3m81lt6o.png)

另一个代表技术是服务网格。它最关键的特点是可以非侵入式接管应用服务通信。它对于传统分布式软件中的开发，最大的区别是业务开发可以完全按照单机的模式来进行。它通过接管整个通信的网络来做像负载均衡、灰度发布这种使能，让平台团队能在网格的层面、在框架的层面进行一些开发和调优，然后业务团队可以更多地聚焦业务本身的开发。特别的是，服务网格还支持像故障注入、可观测性以及分布式调用链分析等等。当下高度微服务化、高度分散的平台环境中，对于业务团队以及运维团队都能带来非常大的工作效率的提升。

![image-20220405220920489](https://cdn.jsdelivr.net/gh/Somnus711/picx-image-hosting@master/image-20220405220920489.23mckcdqyk4g.png)

## 1.3 云原生技术体系及CNCF核心项目

云原生技术的发展跟开源是息息相关的。开源社区是云原生技术的推动者，也是相关技术标准的制定者。云原生的发展背景是为了解决应用标准化的问题，包括统一下沉的基础设施、如何构建通用的弹性扩缩容能力、分布式的环境下如何去做应用业务的监控、日志以及追踪等等。开源的好处是可以汇聚业界的力量去促进技术架构和接口的标准，对于用户来说，可以很大程度地加快技术的普及。所以云原生基于开源来发展是必然的。

![image-20220405222219860](https://cdn.jsdelivr.net/gh/Somnus711/picx-image-hosting@master/image-20220405222219860.6z4s8apvxx4w.png)

CNCF已成为云计算领域新的“标准”制定者。

![image-20220405223411371](https://cdn.jsdelivr.net/gh/Somnus711/picx-image-hosting@master/image-20220405223411371.15mxm6diw5hc.png)

云原生的技术版图。

![image-20220405225259895](https://cdn.jsdelivr.net/gh/Somnus711/picx-image-hosting@master/image-20220405225259895.33zfen7nolmo.png)

CNCF的项目成熟度模型分为三个等级：SANDBOX、INCUBATING、GRADUATED。

![image-20220405225614051](https://cdn.jsdelivr.net/gh/Somnus711/picx-image-hosting@master/image-20220405225614051.6b9vrxxjssg0.png)

​	

